!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},e=function(a,b){var c,e,f,g,h;f=g={},b.groupCollapsed=function(){b.Console_groupCollapsed.apply(console,arguments)},b.groupEnd=function(){b.Console_groupEnd.apply(console,arguments)},b.warn=function(){b.Console_warn.apply(console,arguments)},b.log=function(){b.Console_warn.apply(console,arguments)},c=function(){},c.amd=void 0;var i=Promise.resolve();e={section:{startDate:"Start date",endDate:"End date",duration:"Duration",second:"second",countTotal:"total",countSuccess:"success",countFail:"fails",yes:"yes",no:"no"},test:{startTime:"Start time",endTime:"End time",duration:"Duration",second:"second",countTotal:"Tests",countSuccess:"Successes",fail_plural:"fails",fail:"fail",yes:"yes",no:"no"}};var j=function(){function a(a){return JSON.parse(JSON.stringify(a))}function b(a,b){var c,d;return d=g.render(a,b),c=document.createElement("div"),c.innerHTML=d,c.firstChild}function e(a){var b,c,d,e,f;return void 0===a?"":(c=Math.floor(a/36e5),a-=60*c*60*1e3,d=Math.floor(a/6e4),a-=60*d*1e3,e=Math.floor(a/1e3),a-=1e3*e,f=a,b=c+"h"+h(d,2,"0")+"m"+h(f,4,"0"))}!function(a,b){"object"===("undefined"==typeof f?"undefined":d(f))&&f?b(f):"function"==typeof c&&c.amd?c(["exports"],b):b(a.Mustache={})}(this,function(a){function b(a){return"function"==typeof a}function c(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function e(a,b){return p.call(a,b)}function f(a){return!e(q,a)}function g(a){return String(a).replace(/[&<>"'\/]/g,function(a){return r[a]})}function h(b,d){function e(){if(r&&!x)for(;q.length;)delete p[q.pop()];else q=[];r=!1,x=!1}function g(a){if("string"==typeof a&&(a=a.split(t,2)),!o(a)||2!==a.length)throw new Error("Invalid tags: "+a);h=new RegExp(c(a[0])+"\\s*"),l=new RegExp("\\s*"+c(a[1])),m=new RegExp("\\s*"+c("}"+a[1]))}if(!b)return[];var h,l,m,n=[],p=[],q=[],r=!1,x=!1;g(d||a.tags);for(var y,z,A,B,C,D,E=new k(b);!E.eos();){if(y=E.pos,A=E.scanUntil(h))for(var F=0,G=A.length;G>F;++F)B=A.charAt(F),f(B)?q.push(p.length):x=!0,p.push(["text",B,y,y+1]),y+=1,"\n"===B&&e();if(!E.scan(h))break;if(r=!0,z=E.scan(w)||"name",E.scan(s),"="===z?(A=E.scanUntil(u),E.scan(u),E.scanUntil(l)):"{"===z?(A=E.scanUntil(m),E.scan(v),E.scanUntil(l),z="&"):A=E.scanUntil(l),!E.scan(l))throw new Error("Unclosed tag at "+E.pos);if(C=[z,A,y,E.pos],p.push(C),"#"===z||"^"===z)n.push(C);else if("/"===z){if(D=n.pop(),!D)throw new Error('Unopened section "'+A+'" at '+y);if(D[1]!==A)throw new Error('Unclosed section "'+D[1]+'" at '+y)}else"name"===z||"{"===z||"&"===z?x=!0:"="===z&&g(A)}if(D=n.pop())throw new Error('Unclosed section "'+D[1]+'" at '+E.pos);return j(i(p))}function i(a){for(var b,c,d=[],e=0,f=a.length;f>e;++e)b=a[e],b&&("text"===b[0]&&c&&"text"===c[0]?(c[1]+=b[1],c[3]=b[3]):(d.push(b),c=b));return d}function j(a){for(var b,c,d=[],e=d,f=[],g=0,h=a.length;h>g;++g)switch(b=a[g],b[0]){case"#":case"^":e.push(b),f.push(b),e=b[4]=[];break;case"/":c=f.pop(),c[5]=b[2],e=f.length>0?f[f.length-1][4]:d;break;default:e.push(b)}return d}function k(a){this.string=a,this.tail=a,this.pos=0}function l(a,b){this.view=null==a?{}:a,this.cache={".":this.view},this.parent=b}function m(){this.cache={}}var n=Object.prototype.toString,o=Array.isArray||function(a){return"[object Array]"===n.call(a)},p=RegExp.prototype.test,q=/\S/,r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},s=/\s*/,t=/\s+/,u=/\s*=/,v=/\s*\}/,w=/#|\^|\/|>|\{|&|=|!/;k.prototype.eos=function(){return""===this.tail},k.prototype.scan=function(a){var b=this.tail.match(a);if(!b||0!==b.index)return"";var c=b[0];return this.tail=this.tail.substring(c.length),this.pos+=c.length,c},k.prototype.scanUntil=function(a){var b,c=this.tail.search(a);switch(c){case-1:b=this.tail,this.tail="";break;case 0:b="";break;default:b=this.tail.substring(0,c),this.tail=this.tail.substring(c)}return this.pos+=b.length,b},l.prototype.push=function(a){return new l(a,this)},l.prototype.lookup=function(a){var c,e=this.cache;if(a in e)c=e[a];else{for(var f,g,h=this;h;){if(a.indexOf(".")>0)for(c=h.view,f=a.split("."),g=0;null!=c&&g<f.length;)c=c[f[g++]];else"object"==d(h.view)&&(c=h.view[a]);if(null!=c)break;h=h.parent}e[a]=c}return b(c)&&(c=c.call(this.view)),c},m.prototype.clearCache=function(){this.cache={}},m.prototype.parse=function(a,b){var c=this.cache,d=c[a];return null==d&&(d=c[a]=h(a,b)),d},m.prototype.render=function(a,b,c){var d=this.parse(a),e=b instanceof l?b:new l(b);return this.renderTokens(d,e,c,a)},m.prototype.renderTokens=function(c,e,f,g){function h(a){return l.render(a,e,f)}for(var i,j,k="",l=this,m=0,n=c.length;n>m;++m)switch(i=c[m],i[0]){case"#":if(j=e.lookup(i[1]),!j)continue;if(o(j))for(var p=0,q=j.length;q>p;++p)k+=this.renderTokens(i[4],e.push(j[p]),f,g);else if("object"===("undefined"==typeof j?"undefined":d(j))||"string"==typeof j)k+=this.renderTokens(i[4],e.push(j),f,g);else if(b(j)){if("string"!=typeof g)throw new Error("Cannot use higher-order sections without the original template");j=j.call(e.view,g.slice(i[3],i[5]),h),null!=j&&(k+=j)}else k+=this.renderTokens(i[4],e,f,g);break;case"^":j=e.lookup(i[1]),(!j||o(j)&&0===j.length)&&(k+=this.renderTokens(i[4],e,f,g));break;case">":if(!f)continue;j=b(f)?f(i[1]):f[i[1]],null!=j&&(k+=this.renderTokens(this.parse(j),e,f,j));break;case"&":j=e.lookup(i[1]),null!=j&&(k+=j);break;case"name":j=e.lookup(i[1]),null!=j&&(k+=a.escape(j));break;case"text":k+=i[1]}return k},a.name="mustache.js",a.version="1.0.0",a.tags=["{{","}}"];var x=new m;a.clearCache=function(){return x.clearCache()},a.parse=function(a,b){return x.parse(a,b)},a.render=function(a,b,c){return x.render(a,b,c)},a.to_html=function(c,d,e,f){var g=a.render(c,d,e);return b(f)?void f(g):g},a.escape=g,a.Scanner=k,a.Context=l,a.Writer=m});var h=function(a,b,c){for(;a.length<b;)a=c+a;return a};return{copy:a,render2dom:b,time2string:e}}(),k=function w(a,b,c,d){this.id=w.maxID++,this.title=b,this.tests=[],this.project=a,this.parent=d,this.defaultSection=c,this.results={count:{errors:0,fails:0,successes:0,total:0}}};k.prototype.addTest=function(a){var b;if(this.tests.push(a),this.asyncTests===!1&&a.hasAsyncTests())for(this.asyncTests=!0,b=this.parent;void 0!==b&&(b?b:{}).asyncTests!==!0;)b.asyncTests=!0,b=b.parent;this.refresh()},k.prototype.refresh=function(a,b,c,d){var e,f,g,h,i;if(void 0!==d&&void 0!==this.results.count.fails)this.results.count.errors+=a,this.results.count.fails+=b,this.results.count.successes+=c,this.results.count.total+=d;else{e=this.results.count.errors,f=this.results.count.fails,g=this.results.count.successes,i=this.results.count.total,this.results.count.errors=0,this.results.count.fails=0,this.results.count.successes=0,this.results.count.total=0;for(h in this.tests)this.results.count.errors+=this.tests[h].countErrors(),this.results.count.fails+=this.tests[h].countFailedTests(),this.results.count.successes+=this.tests[h].countSuccessfulTests(),this.results.count.total+=this.tests[h].countTotalTests();void 0!==this.results.count.total&&(a=e-this.results.count.errors,b=f-this.results.count.fails,c=g-this.results.count.successes,d=i-this.results.count.total)}void 0!==this.parent&&void 0!==this.parent.results.count.total&&this.parent.refresh(a,b,c,d),this.getDOM()&&this.getDOM().refresh()},k.prototype.console=function(a){var c,d,e;c=this.countSuccessfulTests(),e=this.countTotalTests(),b.groupCollapsed((void 0!==this.getTitle()?this.getTitle()+" : ":"")+(c===e?"success":"fail")+" : "+c+"/"+e);for(d in this.tests)a&&this.tests[d].isSuccessful()||this.tests[d].console(a);b.groupEnd()},k.prototype.countErrors=function(){return this.results.count.errors},k.prototype.countFailedTests=function(){return this.results.count.fails},k.prototype.countSuccessfulTests=function(){return this.results.count.successes},k.prototype.countTotalTests=function(){return this.results.count.total},k.prototype["catch"]=function(){return this._hasFinished=!1,Promise.prototype["catch"].apply(this.getPromise(),arguments)},k.prototype.describe=function(a){this.description=a},k.prototype.getPromise=function(){return void 0===this.promise&&(this.promise=i),this.promise},k.prototype.getCompletedPromise=function(){var a,b;b=[];for(a in this.tests)b.push(this.tests[a].getCompletedPromise());return Promise.all(b)},k.prototype.getData=function(a){var b,c;c=[],a=void 0===a?!1:a;for(b in this.tests)a&&this.tests[b].isSuccessful()||c.push(this.tests[b].getData());return{tests:c,title:this.title}},k.prototype.getDescription=function(){return this.description},k.prototype.getDOM=function(){return this.domSection},k.prototype.getEndDate=function(){0!==this.tests.length&&this.tests[this.tests.length-1].getEndDate()},k.prototype.getEndTime=function(){return this.project.getTime(this.getEndDate())},k.prototype.getStartDate=function(){return 0!==this.tests.length?this.tests[0].getStartDate():void 0},k.prototype.getStartTime=function(){return this.project.getTime(this.getStartDate())},k.prototype.getTests=function(){return this.tests.slice(0)},k.prototype.getTitle=function(){return this.title?this.title:""},k.prototype.hasAsyncTests=function(){var a;if(void 0!==this.asyncTests)return!0;for(a in this.tests)if(this.tests[a].hasAsyncTests())return this.asyncTests=!0,!0;return!1},k.prototype.hasFinished=function(){var a;if(this._hasFinished)return this._hasFinished;for(a in this.tests)if(!this.tests[a].hasFinished())return!1;return this._hasFinished=!0,this._hasFinished},k.prototype.isDefault=function(){return this.defaultSection},k.prototype.isSuccessful=function(){var a;if(!this.hasFinished())return!1;for(a in this.tests)if(!this.tests[a].isSuccessful())return!1;return!0},k.prototype.setDOM=function(a){this.domSection=a},k.prototype.then=function(){return this._hasFinished=!1,Promise.prototype.then.apply(this.getPromise(),arguments)},k.maxID=0;var l=function(){var a=function(a,b,c,d){var e,f,g,h,i;return 1===arguments.length?this.info.enabled?(f=new k(this.info.project,a,!1,this.info.test),this.info.test.sections.push(f),f):this.context:(this.info.delay?(e=b,i=c,h=d):(e=!1,i=b,h=c),f=this.info.test.sections[this.info.test.sections.length-1],g=new m({async:this.info.async,context:this,enabled:this.info.enabled,executionDelay:e,strict:this.info.strict,parent:f,project:this.info.project,value:i,timeout:h,title:a}),f.addTest(g),this.reset(),g.getPromise())},b=function(){return this.info.enabled&&(this.info.async=!0),this.context},c=function(c){var k,u;return k={info:{async:!1,enabled:!0,delay:!1,strict:!1,test:c,project:c.getProject()}},u=a.bind(k),u.console=e.bind(k),u.comment=d.bind(k),u.describe=h.bind(k),u.disable=g.bind(k),u.display=i.bind(k),u.done=j.bind(k),u.getData=l.bind(k),u.note=o.bind(k),u.constructors={Test:m},u.reset=r.bind(k),u.todo=t.bind(k),u._info=n.bind(k),Object.defineProperties(u,{async:{get:b.bind(k)},delay:{get:f.bind(k)},parent:{get:p.bind(k)},project:{get:q.bind(k)},strict:{get:s.bind(k)}}),k.context=u,k.reset=u.reset,u},d=function(a){return this.info.test.comment(a),this.context},e=function(a){return this.info.enabled&&this.info.test.console(a),this.context},f=function(){return this.info.enabled&&(this.info.delay=!0),this.context},g=function(){return this.info.enabled&&(this.info.enabled=!1),this.context},h=function(a){return this.info.test.describe(a),this.context},i=function(a){this.info.project.display(a)},j=function(){return this.info.enabled&&this.info.test.done(),this.context},l=function(a){var b;return b=this.info.test.getData(a),{endTime:this.info.test.getEndTime(),failed:this.info.test.countFailedTests(),sections:b.sections,startTime:this.info.test.getStartTime(),success:this.info.test.countSuccessfulTests(),tests:this.info.test.countTotalTests()}},n=function(a){if(a!==v)throw"Invalid token";return this.info},o=function u(u){return this.info.test.note(u),this.context},p=function(){return this.info.test},q=function(){return this.info.test.project},r=function(a,b){var c;return a===v?(c=this.info,this.info=b,c):this.info.enabled?(this.info.async=!1,this.info.strict=!1,this.info.enabled=!0,this.info.delay=!1,this.context):this.context},s=function(){return this.info.enabled&&(this.info.strict=!0),this.context},t=function(a){return this.info.test.todo(a),this.context};return c}(),m=function x(a){this.catchTests=[],this.calculated=!1,this.comments=[],this.completed=!1,this.context=a.context,this.creationDate=new Date,this.enabled=a.enabled,this.id=x.lastId++,this.nexts=[],this.notMode=!1,this.parent=a.parent,this.promiseRole=a.promiseRole,this.project=a.project,this.timeout=a.timeout,this.strictMode=a.strict,this.tests=[],this.title=a.title,this.value=a.value,this.executionDelay=a.executionDelay,this.errorExpected=!1,this.toDoList=[],this.errors=[],this.testType=void 0,this.notes=[],this.async=a.async||this.executionDelay!==!1||this.value instanceof Promise||this.value instanceof x,this._isClosed=!1,this.results={error:void 0,test:void 0,timeout:void 0,validity:void 0,count:{errors:0,fails:0,successes:0,total:0}},this.childContext=l(this),this.currentSection=new k(this.project,"",!0,this),this.sections=[this.currentSection],"function"==typeof this.value&&(this.testFunction=this.value,this.testExecution=new q(this)),this.enabled&&(this.buildPromise(),this.execute())};m.prototype.buildPromise=function(){var a;this.promise=new Promise(function(a,b){this.fullfillPromise=a,this.rejectPromise=b}.bind(this)),this.promiseThenFunction=this.promise.then.bind(this.promise);for(a in n.all)this.promise[a]=o.bind({test:this,type:n.all[a],promise:this.promise});this.promise.todo=this.todo.bind(this),this.promise.comment=this.comment.bind(this),this.promise.describe=this.describe.bind(this),this.promise.note=this.note.bind(this),this.promise.getResult=this.getResult.bind(this),this.promise.then=this.then.bind(this),this.promise["catch"]=this["catch"].bind(this),Object.defineProperty(this.promise,"not",{get:function(){return this.not(),this.promise}.bind(this)}),this.promise.$=this},m.prototype.calcResult=function(){var a,b,c,d;if(d=this.errorExpected?this.error:this.value,c=this.testType?this.testType:n.all.isTrue,!this.isUnitTest())return this.results.validity=this.isValid(),void(this.calculated=!0);if(this.results.validity=!0,a=[d].concat(this.testParameters),this.results.error&&!this.errorExpected)b=!1;else if(this.errorExpected&&!this.results.error)b=!1;else{try{b=this.strictMode&&void 0!==c.strictTest?c.strictTest.apply(void 0,a):c.test.apply(void 0,a)}catch(e){b=!1}this.notMode&&(b=!b)}this.results.test=b,this.calculated=!0},m.prototype["catch"]=function(a,b){return 1===arguments.length?this.then(void 0,a):this.then(a,void 0,b)},m.prototype.comment=function y(y){return this.comments.push(y),this.getPromise()},m.prototype.complete=function(a,b){this.completed=!0,!a&&this.testExecution&&(a=this.testExecution.throwError,a&&(b=this.testExecution.error)),a?(this.error=b,this.results.error=!0):this.value=b,this.refresh()},m.prototype.console=function(a){var c,d,e,f;if(a=a,e=this.countSuccessfulTests(),f=this.countTotalTests(),c=(void 0!==this.getTitle()?this.getTitle()+" : ":"")+(e===f?"success":"fail"),f>1){if(c+=" - "+e+"/"+f,b.groupCollapsed(c),this.sections.length>1)for(d in this.sections)a&&this.sections[d].isSuccessful()||0!==this.sections[d].countTotalTests()&&this.sections[d].console(a);else for(d in h)a&&h[d].isSuccessful()||this.sections[0].tests[d].console();b.groupEnd()}else this.isSuccessful()?b.log(c):b.warn(c);return this},m.prototype.countErrors=function(){return this.results.count.errors},m.prototype.countFailedTests=function(){return this.results.count.fails},m.prototype.countSuccessfulTests=function(){return this.results.count.successes},m.prototype.countTotalTests=function(){return this.results.count.total},m.prototype.describe=function(a){return this.description=a,this.promise},m.prototype.done=function(){return this.testExecution.done(),this.getPromise()},m.prototype.execute=function(){var a,b,c,d;this.enabled&&(this.async||this.value instanceof Promise?this.value.$ instanceof m?(d=function(){return this.value.$.getResult()}.bind(this),b=this.value.$.promiseThenFunction(d,d)):this.value instanceof Promise?b=this.value:this.executionDelay!==!1?(b=new Promise(function(b,d){a=b,c=d}),setTimeout(function(){try{a(this.testExecution.execute(this.value))}catch(b){c(b)}}.bind(this),this.executionDelay)):b=void 0===this.promiseRole?Promise.resolve().then(function(){return this.testExecution.execute(this.value)}.bind(this)):"then"===this.promiseRole?this.parent.promiseThenFunction(function(a){return this.testExecution.execute(a)}.bind(this)):this.parent.promiseThenFunction(void 0,function(a){return this.testExecution.execute(a)}.bind(this)):this.testFunction&&(this.value=this.testExecution.execute(),this.value instanceof Promise&&(b=this.value)),void 0!==b?b.$ instanceof m?b.$.promiseThenFunction(function(a){this.complete(!1,a)}.bind(this),function(a){this.complete(!0,a)}.bind(this)):b.then(function(a){this.complete(!1,a)}.bind(this),function(a){this.complete(!0,a)}.bind(this)):this.complete(!1,this.value))},m.prototype.getComments=function(){return this.comments.slice(0)},m.prototype.getCompletedPromise=function(){var a,b;b=[this.getPromise()];for(a in this.sections)b.push(this.sections[a].getCompletedPromise());for(a in this.nexts)b.push(this.nexts[a].getCompletedPromise());return Promise.all(b)},m.prototype.getData=function(a){var b,c,d,e;d=[],a=void 0===a?!1:a;for(c in this.nexts)a&&this.nexts[c].isSuccessful()||d.push(this.nexts[c].getData(a));b={async:this.async,enabled:this.enabled,id:this.id,nexts:d,not:this.notMode,result:this.results.test,sections:[],strict:this.strictMode,testParameters:this.testParametersExport,title:this.title,type:"TestUnit",value:this.value};for(e in this.sections)a&&this.sections[e].isSuccessful()||0==e&&0===this.sections[e].countTotalTests()||b.sections.push(this.sections[e].getData(a));return this.testType&&(b.test=this.testType.code),b},m.prototype.getDescription=function(){return this.description},m.prototype.getDurationResult=function(){return this.durationResult},m.prototype.getDOM=function(){return this.domTest},m.prototype.getEndDate=function(){return this.testFunction?this.testExecution.getEndDate():this.creationDate},m.prototype.getEndTime=function(){this.getProject().getTime(this.getEndDate())},m.prototype.getPromise=function(){return this.promise},m.prototype.getProject=function(){return this.project},m.prototype.getNexts=function(){return this.nexts.slice(0)},m.prototype.getNotes=function(){return this.notes.slice(0)},m.prototype.getResult=function(){return this.results.test===!1?!1:this.results.count.fails>0?!1:this.results.validity===!1?!1:this.results.timeout!==!1},m.prototype.getSections=function(){return this.sections.slice(0)},m.prototype.getStartDate=function(){return this.testFunction?this.testExecution.getStartDate():this.creationDate},m.prototype.getStartTime=function(){return this.getProject().getTime(this.getStartDate())},m.prototype.getTestFunction=function(){return this.testFunction},m.prototype.getTitle=function(){return this.title},m.prototype.getToDoList=function(){return this.toDoList.slice(0)},m.prototype.getValue=function(){return this.value},m.prototype.hasAsyncTests=function(){var a,b;if(void 0!==this.asyncTests)return this.asyncTests;if(this.async)return this.asyncTests=!0,!0;for(a in this.nexts)if(this.nexts[a].hasAsyncTests())return this.asyncTests=!0,!0;for(b in this.sections)if(this.sections[b].hasAsyncTests())return this.asyncTests=!0,!0;return!1},m.prototype.hasFinished=function(){var a,b;if(this._hasFinished===!0)return this._hasFinished;if(this.testFunction&&!this.testExecution.hasFinished())return!1;for(b in this.sections)if(!this.sections[b].hasFinished())return!1;for(a in this.nexts)if(!this.nexts[a].hasFinished())return!1;return this._hasFinished=!0,this._hasFinished},m.prototype.hasFinishedInTime=function(){return this.testFunction?void 0===this.timeout?!0:this.testExecution.hasFinished()?this.testExecution.getDuration()<this.timeout:this.testExecution.getDuration(!0)>=this.timeout?!1:void 0:!0},m.prototype.isClosed=function(){return this._isClosed===!0?!0:this.hasFinished()?(this._isClosed=!0,!0):this.hasFinishedInTime()===!1?(this._isClosed=!0,!0):void 0},m.prototype.isGroup=function(){return this.sections.length>1?!0:this.nexts.length>0?!0:this.sections[0].getTests().length>0},m.prototype.isSuccessful=function(){var a,b;if(this.getResult()===!1)return!1;for(a in this.sections)if(!this.sections[a].isSuccessful())return!1;for(b in this.nexts)if(!this.nexts[b].isSuccessful())return!1;return!0},m.prototype.isUnitTest=function(){return void 0===this.testFunction?!0:void 0!==this.testType?!0:void 0!==this.timeout?!0:void 0!==this.value&&!(this.value instanceof Promise||this.value instanceof m)},m.prototype.isValid=function(){return this.isUnitTest()?!0:this.isGroup()},m.prototype.not=function(){return this.notMode=!0,this.getPromise()},m.prototype.note=function z(z){return this.notes.push(z),this.getPromise()},m.prototype.refresh=function(a,b,c,d){var e,f,g,h,i,j,k,l;if(this.completed&&!this.calculated&&(this.results.error&&(this.calculated=!0,this.rejectPromise(this.error)),!this.results.error||this.errorExpected))try{this.calcResult(),this.results.error||this.fullfillPromise(this.value)}catch(e){this.error=e,this.results.error=!0,this.rejectPromise(this.error)}if(void 0!==this.results.count.total){if(void 0!==d&&void 0!==this.results.count.total)this.results.count.deltaErrors+=a,this.results.count.fails+=b,this.results.count.successes+=c,this.results.count.total+=d,this.results.count.isValid=this.isValid();else{this.errors=[],this.results.validity||(this.results.validity=this.isValid()),f=0,this.results.error&&!this.errorExpected?(f+=1,this.errors.push("The test has raised an exception")):!this.results.error&&this.errorExpected&&(f+=1,this.errors.push("The test should have raise an exception")),g=this.isUnitTest()&&!this.results.test?1:0,g+=f,g+=this.results.validity?0:1,this.isUnitTest()&&!this.results.test&&this.errors.push("The test has failed"),this.results.validity||this.errors.push("Not a valid test"),h=this.hasFinishedInTime(),void 0===h||h||(g+=1),j=this.isUnitTest()&&this.results.test?1:0,j+=void 0!==this.timeout&&this.results.timeout?1:0,this.testFunction&&void 0!==this.timeout&&(h=this.hasFinishedInTime(),void 0===h||h||(j+=1)),l=this.isUnitTest()?1:0,l+=void 0!==this.timeout;for(i in this.sections)f+=this.sections[i].countErrors(),g+=this.sections[i].countFailedTests(),j+=this.sections[i].countSuccessfulTests(),l+=this.sections[i].countTotalTests();for(k in this.nexts)f+=this.nexts[i].countErrors(),g+=this.nexts[k].countFailedTests(),j+=this.nexts[k].countSuccessfulTests(),l+=this.nexts[k].countTotalTests();void 0!==this.results.count.total&&(a=f-this.results.count.errors,b=g-this.results.count.fails,c=j-this.results.count.successes,d=l-this.results.count.total),this.results.count={errors:f,fails:g,successes:j,total:l}}void 0!==this.parent&&void 0!==this.parent.results.count.total&&this.parent.refresh(a,b,c,d),this.getDOM()&&this.getDOM().refresh()}},m.prototype.setDOM=function(a){this.domTest=a},m.prototype.then=function(a,b,c){var d,e,f,g,h;return 1===arguments.length?(h=void 0,f=a):2==arguments.length?"string"==typeof a?(h=a,f=b):(h=void 0,f=a,d=b):3===arguments.length&&(h=a,f=b,d=c),void 0!=f&&(g=new m({async:!0,context:this.childContext,enabled:this.enabled,executionDelay:!1,strict:this.strictMode,parent:this,project:this.getProject(),promiseRole:"then",title:h,value:f}),this.nexts.push(g)),void 0!=d&&(e=new m({async:!0,context:this.childContext,enabled:this.enabled,executionDelay:!1,strict:this.strictMode,parent:this,project:this.getProject(),promiseRole:"catch",title:h,value:d}),this.catchTests.push(e)),this.refresh(),void 0!=g?g.getPromise():e.getPromise()},m.prototype.todo=function(a){return this.toDoList.push(a),this.getPromise()},m.prototype.toString=function(){return this.title+" : "+(this.isSuccessful()?"success":"fail")+" ("+this.countSuccessfulTests()+"/"+this.countTotalTests()+")"},m.get=function(a){return m.ALL[a]},m.lastId=0,m.ALL=[],m.TYPES={test:"test",unit:"unit"};var n=function(a){this.name=a.name,this.test=a.test,this.strictTest=a.strict,this.onerror=void 0===a.onerror?!1:a.onerror};n.add=function(a){var b;b=new n(a),n.all[b.name]=b},n.all={},n.add({name:"contains",test:function(a,b){return a.indexOf(b)}}),n.add({name:"equal",test:function(a,b,c){return a==(3===arguments.length?c:b)},strict:function(a,b,c){return a===(3===arguments.length?c:b)}}),n.add({name:"isBetween",test:function(a,b,c){return a>=b&&c>=a}}),n.add({name:"isDefined",test:function(a){return void 0!=a},strict:function(a){return void 0!==a}}),n.add({name:"isDifferentThan",test:function(a,b){return a!=b},strict:function(a,b){return a!==b}}),n.add({name:"isFalse",test:function(a){return!a},strict:function(a){return a===!1}}),n.add({name:"isGreaterOrEqualThan",test:function(a,b){return a>=b}}),n.add({name:"isGreaterThan",test:function(a,b){return a>b}}),n.add({name:"isInstanceOf",test:function(a,b){return a instanceof b}}),n.add({name:"isLesserOrEqualThan",test:function(a,b){return b>=a}}),n.add({name:"isLesserThan",test:function(a,b){return b>a}}),n.add({name:"isNull",test:function(a){return null==a},strict:function(a){return null===a}}),n.add({name:"isTrue",test:function(a){return!!a},strict:function(a){return a===!0}}),n.add({name:"isUndefined",test:function(a){return void 0==a},strict:function(a){return void 0===a}}),n.add({name:"throwValue",onerror:!0,test:function(a,b){return a==b},strict:function(a,b){return a===b}}),n.add({name:"throw",onerror:!0,test:function(a,b){return a instanceof b}}),m.TEST_TYPES={};var o=function(){return this.test.testType=this.type,this.test.testParameters=Array.prototype.slice.call(arguments,0),this.test.testParametersExport=j.copy(this.test.testParameters),this.test.calculated=!1,this.test.errorExpected=this.type.onerror,this.test.refresh(),this.promise},p=function(a){m.call(this,{project:this,title:a}),this.name=name?name:"Test",this.authors=[],this.domProject=new t(this)};p.prototype=Object.create(m.prototype),p.prototype.constructor=p,p.prototype.addAuthor=function(a){this.authors.push(a)},p.prototype.display=function(a){a=a?a:"body",document.addEventListener("DOMContentLoaded",function(){this.domProject.display(a)}.bind(this))},p.prototype.getAuthors=function(){return this.authors.slice(0)},p.prototype.getTime=function(a){return void 0!==a?a-this.getStartDate():void 0},p.prototype.isUnitTest=function(){return!1},p.prototype.isValid=function(){return!0},p.prototype.setTitle=function(a){this.title=a};var q=function(a){this.test=a,this.testFunction=this.test.getTestFunction(),this.childContext=this.test.childContext,this.async=this.test.async,this.context=this.test.context};q.prototype.done=function(){this.endDate=new Date},q.prototype.execute=function(){var a,b,c;c=[this.test.childContext],1===arguments.length&&c.push(arguments[0]),b=this.context.info,this.context.reset(v,this.childContext._info(v)),this.startDate=new Date;try{this.result=this.testFunction.apply(void 0,c)}catch(a){this.throwError=!0,this.error=a}return this.result instanceof Promise?this.result.then(function(a){return this.endDate=void 0===this.endDate?new Date:this.endDate,this.result=a,this.result}.bind(this),function(a){this.endDate=void 0===this.endDate?new Date:this.endDate,this.throwError=!0,this.error=a}.bind(this)):this.endDate=void 0===this.endDate?new Date:this.endDate,this.context.reset(v,b),this.result},q.prototype.hasFinished=function(){return void 0!==this.endDate},q.prototype.getDuration=function(a){var b;return b=void 0!==this.endDate?this.endDate:a?Date.now():void 0,void 0!==b?b-this.startDate:void 0},q.prototype.getEndDate=function(){return this.endDate},q.prototype.getStartDate=function(){return this.startDate};var r=function(a){this.test=a,this.test.setDOM(this),this.childTests=[],this.collapsed=!0};r.prototype.buildDOM=function(a){var b,c,d,e,f;if(this.collapsed=a,c=this.getTemplateData(),this.dom=j.render2dom(this.getTemplate(),c),e=this.dom.querySelector("header"),e.addEventListener("click",function(a){var b;this.collapsed?this.dom.classList.remove("collapsed"):this.dom.classList.add("collapsed"),b=this.dom,this.buildDOM(!this.collapsed),b.parentElement.replaceChild(this.dom,b),a.stopPropagation()}.bind(this)),this.collapsed)for(b in this.childTests)this.childTests[b].destroy();else{d=this.dom.querySelector("div#tests"),this.childTests=this.getChildTests();for(f in this.childTests)d.appendChild(this.childTests[f].getDOM());d=this.dom.querySelector("div#thenTests"),this.thenTests=this.getThenTests();for(f in this.thenTests)d.appendChild(this.thenTests[f].getDOM())}},r.prototype.destroy=function(){var a;this.test.setDOM(void 0),void 0!==this.dom&&(null!==this.dom.parentElement&&void 0!==this.dom.parentElement&&this.dom.parentElement.removeChild(this.dom),this.dom=void 0);for(a in this.childTests)this.childTests[a].destroy()},r.prototype.getDOM=function(a){return a=void 0===a?this.collapsed:!!a,void 0!==this.dom&&a===this.collapsed||this.buildDOM(a),this.dom},r.prototype.getTemplateData=function(){var a,b,c,d;return d=this.test.getStartTime(),b=this.test.getEndTime(),void 0!==b&&(a=(b-d)/1e3),c=this.test.countFailedTests(),{async:this.test.async,collapsed:this.collapsed,comments:this.test.getComments(),description:this.test.getDescription(),duration:a,endTime:j.time2string(b),errors:this.test.errors.slice(0),isGroup:this.test.isGroup(),lang:e.test,notes:this.test.getNotes(),result:this.test.getResult(),severalFails:c>1,startTime:j.time2string(d),strict:this.test.strictMode,success:this.test.isSuccessful(),thens:this.test.getNexts(),title:this.test.getTitle(),toDoList:this.test.getToDoList(),totalFails:c,totalSuccesses:this.test.countSuccessfulTests(),totalTests:this.test.countTotalTests()}},r.prototype.getTest=function(){return this.test},r.prototype.getChildTests=function(){var a,b,c,d;this.test.sections[0].isDefault()?(d=this.test.sections[0].getTests(),b=this.test.getSections(),b.shift()):d=this.test.getSections(),a=[],d=d.concat(b);for(c in d)void 0!==d[c].getDOM()?a.push(d[c].getDOM()):d[c]instanceof k?a.push(new s(d[c])):a.push(new r(d[c]));return a},r.prototype.getThenTests=function(){var a,b,c;a=[],c=this.test.getNexts();for(b in c)a.push(new r(c[b]));return a},r.prototype.getTemplate=function(){return'<div class="test {{#success}}pass{{/success}}{{^success}}fail{{/success}} {{#collapsed}}collapsed{{/collapsed}} {{#isGroup}}group{{/isGroup}} {{#severalFails}}severalFails{{/severalFails}}"><header><div id="title">{{#title}}{{title}}{{/title}}{{^title}}<span style="font-style: italic">no title</span>{{/title}}</div><div id="description">{{{description}}}</div><div id="fails">{{totalFails}}</div><div id="successes">{{totalSuccesses}}</div><div id="countTests">{{totalTests}}</div><div id="successesByTests">{{totalSuccesses}}/{{totalTests}}</div>{{#errors}}<div class="errorReason">{{{.}}}</div>{{/errors}}{{#toDoList}}<div class="todo">{{{.}}}</div>{{/toDoList}}{{#comments}}<div class="comment">{{{.}}}</div>{{/comments}}{{#notes}}<div class="note">{{{.}}}</div>{{/notes}}</header><div id="tests"></div><div id="thenTests"></div></div>'},r.prototype.refresh=function(){var a;void 0!==this.dom&&(a=this.dom,this.buildDOM(this.collapsed),a.parentElement.replaceChild(this.dom,a));
};var s=function(a){r.call(this,a),this.section=a};s.prototype.buildDOM=function(a){r.prototype.buildDOM.call(this,a)},s.prototype.destroy=function(){r.prototype.destroy.apply(this,arguments)},s.prototype.getChildTests=function(){var a,b,c;c=this.test.getTests(),a=[];for(b in c)void 0!==c[b].getDOM()?a.push(c[b].getDOM()):a.push(new r(c[b]));return a},s.prototype.getDOM=function(a){return a=void 0===a?this.collapsed:!!a,void 0!==this.dom&&a===this.collapsed||this.buildDOM(a),this.dom},s.prototype.getTemplateData=function(){var a,b,c;return c=this.section.getStartTime(),b=this.section.getEndTime(),void 0!==b&&(a=b-c),{collapsed:this.collapsed,totalFails:this.section.countFailedTests(),totalSuccesses:this.section.countSuccessfulTests(),totalTests:this.section.countTotalTests(),description:this.section.getDescription(),duration:a,endTime:j.time2string(b),lang:e.section,startTime:j.time2string(c),success:this.section.isSuccessful(),title:this.section.getTitle()}},s.prototype.getTemplate=function(){return'<div class="test group {{#success}}pass{{/success}}{{^success}}fail{{/success}} {{#collapsed}}collapsed{{/collapsed}} {{#severalFails}}severalFails{{/severalFails}}"><header><div id="title">{{title}}</div><div id="description">{{description}}</div><div id="fails">{{totalFails}}</div><div id="successes">{{totalSuccesses}}</div><div id="countTests">{{totalTests}}</div><div id="successesByTests">{{totalSuccesses}}/{{totalTests}}</div>{{#toDoList}}<div class="todo">{{.}}</div>{{/toDoList}}{{#comments}}<div class="comment">{{.}}</div>{{/comments}}</header><div id="tests"></div><div id="nexts"></div></div>'};var t=function(a){r.call(this,a),this.project=a,this.collapsed=!1};t.prototype=Object.create(r.prototype),t.prototype.constructor=t,t.prototype.buildDOM=function(a){this.globalDOM=document.createElement("div"),this.globalDOM.classList.add("testJS"),r.prototype.buildDOM.call(this,a),this.dom.classList.remove("test"),this.dom.classList.add("project"),this.globalDOM.appendChild(this.dom)},t.prototype.display=function(a){var b;b=a instanceof HTMLElement?a:document.querySelector(a),this.buildDOM(!1),b.appendChild(this.globalDOM)},t.prototype.getTemplateData=function(){var a;return a=r.prototype.getTemplateData.call(this),a.authors=this.project.getAuthors(),a};var u=new p,v={};return l(u)}(void 0,{Console_groupCollapsed:console.groupCollapsed,Console_groupEnd:console.groupEnd,Console_warn:console.warn,Console_log:console.log});c["default"]=e,window&&(window.test=e)},{}]},{},[1]);