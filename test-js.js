!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){!function(a,b){"object"==typeof c&&c&&"string"!=typeof c.nodeName?b(c):"function"==typeof define&&define.amd?define(["exports"],b):(a.Mustache={},b(a.Mustache))}(this,function(a){function b(a){return"function"==typeof a}function c(a){return p(a)?"array":typeof a}function d(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function e(a,b){return null!=a&&"object"==typeof a&&b in a}function f(a,b){return q.call(a,b)}function g(a){return!f(r,a)}function h(a){return String(a).replace(/[&<>"'`=\/]/g,function(a){return s[a]})}function i(b,c){function e(){if(r&&!s)for(;q.length;)delete o[q.pop()];else q=[];r=!1,s=!1}function f(a){if("string"==typeof a&&(a=a.split(u,2)),!p(a)||2!==a.length)throw new Error("Invalid tags: "+a);h=new RegExp(d(a[0])+"\\s*"),i=new RegExp("\\s*"+d(a[1])),m=new RegExp("\\s*"+d("}"+a[1]))}if(!b)return[];var h,i,m,n=[],o=[],q=[],r=!1,s=!1;f(c||a.tags);for(var y,z,A,B,C,D,E=new l(b);!E.eos();){if(y=E.pos,A=E.scanUntil(h))for(var F=0,G=A.length;G>F;++F)B=A.charAt(F),g(B)?q.push(o.length):s=!0,o.push(["text",B,y,y+1]),y+=1,"\n"===B&&e();if(!E.scan(h))break;if(r=!0,z=E.scan(x)||"name",E.scan(t),"="===z?(A=E.scanUntil(v),E.scan(v),E.scanUntil(i)):"{"===z?(A=E.scanUntil(m),E.scan(w),E.scanUntil(i),z="&"):A=E.scanUntil(i),!E.scan(i))throw new Error("Unclosed tag at "+E.pos);if(C=[z,A,y,E.pos],o.push(C),"#"===z||"^"===z)n.push(C);else if("/"===z){if(D=n.pop(),!D)throw new Error('Unopened section "'+A+'" at '+y);if(D[1]!==A)throw new Error('Unclosed section "'+D[1]+'" at '+y)}else"name"===z||"{"===z||"&"===z?s=!0:"="===z&&f(A)}if(D=n.pop())throw new Error('Unclosed section "'+D[1]+'" at '+E.pos);return k(j(o))}function j(a){for(var b,c,d=[],e=0,f=a.length;f>e;++e)b=a[e],b&&("text"===b[0]&&c&&"text"===c[0]?(c[1]+=b[1],c[3]=b[3]):(d.push(b),c=b));return d}function k(a){for(var b,c,d=[],e=d,f=[],g=0,h=a.length;h>g;++g)switch(b=a[g],b[0]){case"#":case"^":e.push(b),f.push(b),e=b[4]=[];break;case"/":c=f.pop(),c[5]=b[2],e=f.length>0?f[f.length-1][4]:d;break;default:e.push(b)}return d}function l(a){this.string=a,this.tail=a,this.pos=0}function m(a,b){this.view=a,this.cache={".":this.view},this.parent=b}function n(){this.cache={}}var o=Object.prototype.toString,p=Array.isArray||function(a){return"[object Array]"===o.call(a)},q=RegExp.prototype.test,r=/\S/,s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},t=/\s*/,u=/\s+/,v=/\s*=/,w=/\s*\}/,x=/#|\^|\/|>|\{|&|=|!/;l.prototype.eos=function(){return""===this.tail},l.prototype.scan=function(a){var b=this.tail.match(a);if(!b||0!==b.index)return"";var c=b[0];return this.tail=this.tail.substring(c.length),this.pos+=c.length,c},l.prototype.scanUntil=function(a){var b,c=this.tail.search(a);switch(c){case-1:b=this.tail,this.tail="";break;case 0:b="";break;default:b=this.tail.substring(0,c),this.tail=this.tail.substring(c)}return this.pos+=b.length,b},m.prototype.push=function(a){return new m(a,this)},m.prototype.lookup=function(a){var c,d=this.cache;if(d.hasOwnProperty(a))c=d[a];else{for(var f,g,h=this,i=!1;h;){if(a.indexOf(".")>0)for(c=h.view,f=a.split("."),g=0;null!=c&&g<f.length;)g===f.length-1&&(i=e(c,f[g])),c=c[f[g++]];else c=h.view[a],i=e(h.view,a);if(i)break;h=h.parent}d[a]=c}return b(c)&&(c=c.call(this.view)),c},n.prototype.clearCache=function(){this.cache={}},n.prototype.parse=function(a,b){var c=this.cache,d=c[a];return null==d&&(d=c[a]=i(a,b)),d},n.prototype.render=function(a,b,c){var d=this.parse(a),e=b instanceof m?b:new m(b);return this.renderTokens(d,e,c,a)},n.prototype.renderTokens=function(a,b,c,d){for(var e,f,g,h="",i=0,j=a.length;j>i;++i)g=void 0,e=a[i],f=e[0],"#"===f?g=this.renderSection(e,b,c,d):"^"===f?g=this.renderInverted(e,b,c,d):">"===f?g=this.renderPartial(e,b,c,d):"&"===f?g=this.unescapedValue(e,b):"name"===f?g=this.escapedValue(e,b):"text"===f&&(g=this.rawValue(e)),void 0!==g&&(h+=g);return h},n.prototype.renderSection=function(a,c,d,e){function f(a){return g.render(a,c,d)}var g=this,h="",i=c.lookup(a[1]);if(i){if(p(i))for(var j=0,k=i.length;k>j;++j)h+=this.renderTokens(a[4],c.push(i[j]),d,e);else if("object"==typeof i||"string"==typeof i||"number"==typeof i)h+=this.renderTokens(a[4],c.push(i),d,e);else if(b(i)){if("string"!=typeof e)throw new Error("Cannot use higher-order sections without the original template");i=i.call(c.view,e.slice(a[3],a[5]),f),null!=i&&(h+=i)}else h+=this.renderTokens(a[4],c,d,e);return h}},n.prototype.renderInverted=function(a,b,c,d){var e=b.lookup(a[1]);return!e||p(e)&&0===e.length?this.renderTokens(a[4],b,c,d):void 0},n.prototype.renderPartial=function(a,c,d){if(d){var e=b(d)?d(a[1]):d[a[1]];return null!=e?this.renderTokens(this.parse(e),c,d,e):void 0}},n.prototype.unescapedValue=function(a,b){var c=b.lookup(a[1]);return null!=c?c:void 0},n.prototype.escapedValue=function(b,c){var d=c.lookup(b[1]);return null!=d?a.escape(d):void 0},n.prototype.rawValue=function(a){return a[1]},a.name="mustache.js",a.version="2.2.1",a.tags=["{{","}}"];var y=new n;a.clearCache=function(){return y.clearCache()},a.parse=function(a,b){return y.parse(a,b)},a.render=function(a,b,d){if("string"!=typeof a)throw new TypeError('Invalid template! Template should be a "string" but "'+c(a)+'" was given as the first argument for mustache#render(template, view, partials)');return y.render(a,b,d)},a.to_html=function(c,d,e,f){var g=a.render(c,d,e);return b(f)?void f(g):g},a.escape=h,a.Scanner=l,a.Context=m,a.Writer=n})},{}],2:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=a("mustache"),e=function(a,b){var c,e,f;b.groupCollapsed=function(){b.Console_groupCollapsed.apply(console,arguments)},b.groupEnd=function(){b.Console_groupEnd.apply(console,arguments)},b.warn=function(){b.Console_warn.apply(console,arguments)},b.log=function(){b.Console_warn.apply(console,arguments)},c=function(){},c.amd=void 0;var g=Promise.resolve();e={section:{startDate:"Start date",endDate:"End date",duration:"Duration",second:"second",countTotal:"total",countSuccess:"success",countFail:"fails",yes:"yes",no:"no"},test:{startTime:"Start time",endTime:"End time",duration:"Duration",second:"second",countTotal:"Tests",countSuccess:"Successes",fail_plural:"fails",fail:"fail",yes:"yes",no:"no"}};var h=function(){function a(a){return JSON.parse(JSON.stringify(a))}function b(a,b){var c,e;return e=d.render(a,b),c=document.createElement("div"),c.innerHTML=e,c.firstChild}function c(a){var b,c,d,f,g;return void 0===a?"":(c=Math.floor(a/36e5),a-=60*c*60*1e3,d=Math.floor(a/6e4),a-=60*d*1e3,f=Math.floor(a/1e3),a-=1e3*f,g=a,b=c+"h"+e(d,2,"0")+"m"+e(g,4,"0"))}var e=function(a,b,c){for(;a.length<b;)a=c+a;return a};return{copy:a,render2dom:b,time2string:c}}(),i=function u(a,b,c,d){this.id=u.maxID++,this.title=b,this.tests=[],this.project=a,this.parent=d,this.defaultSection=c,this.results={count:{errors:0,fails:0,successes:0,total:0}}};i.prototype.addTest=function(a){var b;if(this.tests.push(a),this.asyncTests===!1&&a.hasAsyncTests())for(this.asyncTests=!0,b=this.parent;void 0!==b&&(b?b:{}).asyncTests!==!0;)b.asyncTests=!0,b=b.parent;this.refresh()},i.prototype.refresh=function(a,b,c,d){var e,f,g,h,i;if(void 0!==d&&void 0!==this.results.count.fails)this.results.count.errors+=a,this.results.count.fails+=b,this.results.count.successes+=c,this.results.count.total+=d;else{e=this.results.count.errors,f=this.results.count.fails,g=this.results.count.successes,i=this.results.count.total,this.results.count.errors=0,this.results.count.fails=0,this.results.count.successes=0,this.results.count.total=0;for(h in this.tests)this.results.count.errors+=this.tests[h].countErrors(),this.results.count.fails+=this.tests[h].countFailedTests(),this.results.count.successes+=this.tests[h].countSuccessfulTests(),this.results.count.total+=this.tests[h].countTotalTests();void 0!==this.results.count.total&&(a=e-this.results.count.errors,b=f-this.results.count.fails,c=g-this.results.count.successes,d=i-this.results.count.total)}void 0!==this.parent&&void 0!==this.parent.results.count.total&&this.parent.refresh(a,b,c,d),this.getDOM()&&this.getDOM().refresh()},i.prototype.console=function(a){var c,d,e;c=this.countSuccessfulTests(),e=this.countTotalTests(),b.groupCollapsed((void 0!==this.getTitle()?this.getTitle()+" : ":"")+(c===e?"success":"fail")+" : "+c+"/"+e);for(d in this.tests)a&&this.tests[d].isSuccessful()||this.tests[d].console(a);b.groupEnd()},i.prototype.countErrors=function(){return this.results.count.errors},i.prototype.countFailedTests=function(){return this.results.count.fails},i.prototype.countSuccessfulTests=function(){return this.results.count.successes},i.prototype.countTotalTests=function(){return this.results.count.total},i.prototype["catch"]=function(){return this._hasFinished=!1,Promise.prototype["catch"].apply(this.getPromise(),arguments)},i.prototype.describe=function(a){this.description=a},i.prototype.getPromise=function(){return void 0===this.promise&&(this.promise=g),this.promise},i.prototype.getCompletedPromise=function(){var a,b;b=[];for(a in this.tests)b.push(this.tests[a].getCompletedPromise());return Promise.all(b)},i.prototype.getData=function(a){var b,c;c=[],a=void 0===a?!1:a;for(b in this.tests)a&&this.tests[b].isSuccessful()||c.push(this.tests[b].getData());return{tests:c,title:this.title}},i.prototype.getDescription=function(){return this.description},i.prototype.getDOM=function(){return this.domSection},i.prototype.getEndDate=function(){0!==this.tests.length&&this.tests[this.tests.length-1].getEndDate()},i.prototype.getEndTime=function(){return this.project.getTime(this.getEndDate())},i.prototype.getStartDate=function(){return 0!==this.tests.length?this.tests[0].getStartDate():void 0},i.prototype.getStartTime=function(){return this.project.getTime(this.getStartDate())},i.prototype.getTests=function(){return this.tests.slice(0)},i.prototype.getTitle=function(){return this.title?this.title:""},i.prototype.hasAsyncTests=function(){var a;if(void 0!==this.asyncTests)return!0;for(a in this.tests)if(this.tests[a].hasAsyncTests())return this.asyncTests=!0,!0;return!1},i.prototype.hasFinished=function(){var a;if(this._hasFinished)return this._hasFinished;for(a in this.tests)if(!this.tests[a].hasFinished())return!1;return this._hasFinished=!0,this._hasFinished},i.prototype.isDefault=function(){return this.defaultSection},i.prototype.isSuccessful=function(){var a;if(!this.hasFinished())return!1;for(a in this.tests)if(!this.tests[a].isSuccessful())return!1;return!0},i.prototype.setDOM=function(a){this.domSection=a},i.prototype.then=function(){return this._hasFinished=!1,Promise.prototype.then.apply(this.getPromise(),arguments)},i.maxID=0;var j=function(){var a=function(a,b,c,d){var e,f,g,h,j;return 1===arguments.length?this.info.enabled?(f=new i(this.info.project,a,!1,this.info.test),this.info.test.sections.push(f),f):this.context:(this.info.delay?(e=b,j=c,h=d):(e=!1,j=b,h=c),f=this.info.test.sections[this.info.test.sections.length-1],g=new k({async:this.info.async,context:this,enabled:this.info.enabled,executionDelay:e,strict:this.info.strict,parent:f,project:this.info.project,value:j,timeout:h,title:a}),f.addTest(g),this.reset(),g.getPromise())},b=function(){return this.info.enabled&&(this.info.async=!0),this.context},c=function(c){var i,t;return i={info:{async:!1,enabled:!0,delay:!1,strict:!1,test:c,project:c.getProject()}},t=a.bind(i),t.console=e.bind(i),t.comment=d.bind(i),t.describe=h.bind(i),t.disable=g.bind(i),t.display=j.bind(i),t.done=l.bind(i),t.getData=m.bind(i),t.note=o.bind(i),t.constructors={Test:k},t.reset=r.bind(i),t.todo=u.bind(i),t._info=n.bind(i),Object.defineProperties(t,{async:{get:b.bind(i)},delay:{get:f.bind(i)},parent:{get:p.bind(i)},project:{get:q.bind(i)},strict:{get:s.bind(i)}}),i.context=t,i.reset=t.reset,t},d=function(a){return this.info.test.comment(a),this.context},e=function(a){return this.info.enabled&&this.info.test.console(a),this.context},f=function(){return this.info.enabled&&(this.info.delay=!0),this.context},g=function(){return this.info.enabled&&(this.info.enabled=!1),this.context},h=function(a){return this.info.test.describe(a),this.context},j=function(a){this.info.project.display(a)},l=function(){return this.info.enabled&&this.info.test.done(),this.context},m=function(a){var b;return b=this.info.test.getData(a),{endTime:this.info.test.getEndTime(),failed:this.info.test.countFailedTests(),sections:b.sections,startTime:this.info.test.getStartTime(),success:this.info.test.countSuccessfulTests(),tests:this.info.test.countTotalTests()}},n=function(a){if(a!==t)throw"Invalid token";return this.info},o=function v(v){return this.info.test.note(v),this.context},p=function(){return this.info.test},q=function(){return this.info.test.project},r=function(a,b){var c;return a===t?(c=this.info,this.info=b,c):this.info.enabled?(this.info.async=!1,this.info.strict=!1,this.info.enabled=!0,this.info.delay=!1,this.context):this.context},s=function(){return this.info.enabled&&(this.info.strict=!0),this.context},u=function(a){return this.info.test.todo(a),this.context};return c}(),k=function v(a){this.catchTests=[],this.calculated=!1,this.comments=[],this.completed=!1,this.context=a.context,this.creationDate=new Date,this.enabled=a.enabled,this.id=v.lastId++,this.nexts=[],this.notMode=!1,this.parent=a.parent,this.promiseRole=a.promiseRole,this.project=a.project,this.timeout=a.timeout,this.strictMode=a.strict,this.tests=[],this.title=a.title,this.value=a.value,this.executionDelay=a.executionDelay,this.errorExpected=!1,this.toDoList=[],this.errors=[],this.testType=void 0,this.notes=[],this.async=a.async||this.executionDelay!==!1||this.value instanceof Promise||this.value instanceof v,this._isClosed=!1,this.results={error:void 0,test:void 0,timeout:void 0,validity:void 0,count:{errors:0,fails:0,successes:0,total:0}},this.childContext=j(this),this.currentSection=new i(this.project,"",!0,this),this.sections=[this.currentSection],"function"==typeof this.value&&(this.testFunction=this.value,this.testExecution=new o(this)),this.enabled&&(this.buildPromise(),this.execute())};k.prototype.buildPromise=function(){var a;this.promise=new Promise(function(a,b){this.fullfillPromise=a,this.rejectPromise=b}.bind(this)),this.promiseThenFunction=this.promise.then.bind(this.promise);for(a in l.all)this.promise[a]=m.bind({test:this,type:l.all[a],promise:this.promise});this.promise.todo=this.todo.bind(this),this.promise.comment=this.comment.bind(this),this.promise.describe=this.describe.bind(this),this.promise.note=this.note.bind(this),this.promise.getResult=this.getResult.bind(this),this.promise.then=this.then.bind(this),this.promise["catch"]=this["catch"].bind(this),Object.defineProperty(this.promise,"not",{get:function(){return this.not(),this.promise}.bind(this)}),this.promise.$=this},k.prototype.calcResult=function(){var a,b,c,d;if(d=this.errorExpected?this.error:this.value,c=this.testType?this.testType:l.all.isTrue,!this.isUnitTest())return this.results.validity=this.isValid(),void(this.calculated=!0);if(this.results.validity=!0,a=[d].concat(this.testParameters),this.results.error&&!this.errorExpected)b=!1;else if(this.errorExpected&&!this.results.error)b=!1;else{try{b=this.strictMode&&void 0!==c.strictTest?c.strictTest.apply(void 0,a):c.test.apply(void 0,a)}catch(e){b=!1}this.notMode&&(b=!b)}this.results.test=b,this.calculated=!0},k.prototype["catch"]=function(a,b){return 1===arguments.length?this.then(void 0,a):this.then(a,void 0,b)},k.prototype.comment=function w(w){return this.comments.push(w),this.getPromise()},k.prototype.complete=function(a,b){this.completed=!0,!a&&this.testExecution&&(a=this.testExecution.throwError,a&&(b=this.testExecution.error)),a?(this.error=b,this.results.error=!0):this.value=b,this.refresh()},k.prototype.console=function(a){var c,d,e,g;if(a=a,e=this.countSuccessfulTests(),g=this.countTotalTests(),c=(void 0!==this.getTitle()?this.getTitle()+" : ":"")+(e===g?"success":"fail"),g>1){if(c+=" - "+e+"/"+g,b.groupCollapsed(c),this.sections.length>1)for(d in this.sections)a&&this.sections[d].isSuccessful()||0!==this.sections[d].countTotalTests()&&this.sections[d].console(a);else for(d in f)a&&f[d].isSuccessful()||this.sections[0].tests[d].console();b.groupEnd()}else this.isSuccessful()?b.log(c):b.warn(c);return this},k.prototype.countErrors=function(){return this.results.count.errors},k.prototype.countFailedTests=function(){return this.results.count.fails},k.prototype.countSuccessfulTests=function(){return this.results.count.successes},k.prototype.countTotalTests=function(){return this.results.count.total},k.prototype.describe=function(a){return this.description=a,this.promise},k.prototype.done=function(){return this.testExecution.done(),this.getPromise()},k.prototype.execute=function(){var a,b,c,d;this.enabled&&(this.async||this.value instanceof Promise?this.value.$ instanceof k?(d=function(){return this.value.$.getResult()}.bind(this),b=this.value.$.promiseThenFunction(d,d)):this.value instanceof Promise?b=this.value:this.executionDelay!==!1?(b=new Promise(function(b,d){a=b,c=d}),setTimeout(function(){try{a(this.testExecution.execute(this.value))}catch(b){c(b)}}.bind(this),this.executionDelay)):b=void 0===this.promiseRole?Promise.resolve().then(function(){return this.testExecution.execute(this.value)}.bind(this)):"then"===this.promiseRole?this.parent.promiseThenFunction(function(a){return this.testExecution.execute(a)}.bind(this)):this.parent.promiseThenFunction(void 0,function(a){return this.testExecution.execute(a)}.bind(this)):this.testFunction&&(this.value=this.testExecution.execute(),this.value instanceof Promise&&(b=this.value)),void 0!==b?b.$ instanceof k?b.$.promiseThenFunction(function(a){this.complete(!1,a)}.bind(this),function(a){this.complete(!0,a)}.bind(this)):b.then(function(a){this.complete(!1,a)}.bind(this),function(a){this.complete(!0,a)}.bind(this)):this.complete(!1,this.value))},k.prototype.getComments=function(){return this.comments.slice(0)},k.prototype.getCompletedPromise=function(){var a,b;b=[this.getPromise()];for(a in this.sections)b.push(this.sections[a].getCompletedPromise());for(a in this.nexts)b.push(this.nexts[a].getCompletedPromise());return Promise.all(b)},k.prototype.getData=function(a){var b,c,d,e;d=[],a=void 0===a?!1:a;for(c in this.nexts)a&&this.nexts[c].isSuccessful()||d.push(this.nexts[c].getData(a));b={async:this.async,enabled:this.enabled,id:this.id,nexts:d,not:this.notMode,result:this.results.test,sections:[],strict:this.strictMode,testParameters:this.testParametersExport,title:this.title,type:"TestUnit",value:this.value};for(e in this.sections)a&&this.sections[e].isSuccessful()||0==e&&0===this.sections[e].countTotalTests()||b.sections.push(this.sections[e].getData(a));return this.testType&&(b.test=this.testType.code),b},k.prototype.getDescription=function(){return this.description},k.prototype.getDurationResult=function(){return this.durationResult},k.prototype.getDOM=function(){return this.domTest},k.prototype.getEndDate=function(){return this.testFunction?this.testExecution.getEndDate():this.creationDate},k.prototype.getEndTime=function(){this.getProject().getTime(this.getEndDate())},k.prototype.getPromise=function(){return this.promise},k.prototype.getProject=function(){return this.project},k.prototype.getNexts=function(){return this.nexts.slice(0)},k.prototype.getNotes=function(){return this.notes.slice(0)},k.prototype.getResult=function(){return this.results.test===!1?!1:this.results.count.fails>0?!1:this.results.validity===!1?!1:this.results.timeout!==!1},k.prototype.getSections=function(){return this.sections.slice(0)},k.prototype.getStartDate=function(){return this.testFunction?this.testExecution.getStartDate():this.creationDate},k.prototype.getStartTime=function(){return this.getProject().getTime(this.getStartDate())},k.prototype.getTestFunction=function(){return this.testFunction},k.prototype.getTitle=function(){return this.title},k.prototype.getToDoList=function(){return this.toDoList.slice(0)},k.prototype.getValue=function(){return this.value},k.prototype.hasAsyncTests=function(){var a,b;if(void 0!==this.asyncTests)return this.asyncTests;if(this.async)return this.asyncTests=!0,!0;for(a in this.nexts)if(this.nexts[a].hasAsyncTests())return this.asyncTests=!0,!0;for(b in this.sections)if(this.sections[b].hasAsyncTests())return this.asyncTests=!0,!0;return!1},k.prototype.hasFinished=function(){var a,b;if(this._hasFinished===!0)return this._hasFinished;if(this.testFunction&&!this.testExecution.hasFinished())return!1;for(b in this.sections)if(!this.sections[b].hasFinished())return!1;for(a in this.nexts)if(!this.nexts[a].hasFinished())return!1;return this._hasFinished=!0,this._hasFinished},k.prototype.hasFinishedInTime=function(){return this.testFunction?void 0===this.timeout?!0:this.testExecution.hasFinished()?this.testExecution.getDuration()<this.timeout:this.testExecution.getDuration(!0)>=this.timeout?!1:void 0:!0},k.prototype.isClosed=function(){return this._isClosed===!0?!0:this.hasFinished()?(this._isClosed=!0,!0):this.hasFinishedInTime()===!1?(this._isClosed=!0,!0):void 0},k.prototype.isGroup=function(){return this.sections.length>1?!0:this.nexts.length>0?!0:this.sections[0].getTests().length>0},k.prototype.isSuccessful=function(){var a,b;if(this.getResult()===!1)return!1;for(a in this.sections)if(!this.sections[a].isSuccessful())return!1;for(b in this.nexts)if(!this.nexts[b].isSuccessful())return!1;return!0},k.prototype.isUnitTest=function(){return void 0===this.testFunction?!0:void 0!==this.testType?!0:void 0!==this.timeout?!0:void 0!==this.value&&!(this.value instanceof Promise||this.value instanceof k)},k.prototype.isValid=function(){return this.isUnitTest()?!0:this.isGroup()},k.prototype.not=function(){return this.notMode=!0,this.getPromise()},k.prototype.note=function x(x){return this.notes.push(x),this.getPromise()},k.prototype.refresh=function(a,b,c,d){var e,f,g,h,i,j,k,l;if(this.completed&&!this.calculated&&(this.results.error&&(this.calculated=!0,this.rejectPromise(this.error)),!this.results.error||this.errorExpected))try{this.calcResult(),this.results.error||this.fullfillPromise(this.value)}catch(e){this.error=e,this.results.error=!0,this.rejectPromise(this.error)}if(void 0!==this.results.count.total){if(void 0!==d&&void 0!==this.results.count.total)this.results.count.deltaErrors+=a,this.results.count.fails+=b,this.results.count.successes+=c,this.results.count.total+=d,this.results.count.isValid=this.isValid();else{this.errors=[],this.results.validity||(this.results.validity=this.isValid()),f=0,this.results.error&&!this.errorExpected?(f+=1,this.errors.push("The test has raised an exception")):!this.results.error&&this.errorExpected&&(f+=1,this.errors.push("The test should have raise an exception")),g=this.isUnitTest()&&!this.results.test?1:0,g+=f,g+=this.results.validity?0:1,this.isUnitTest()&&!this.results.test&&this.errors.push("The test has failed"),this.results.validity||this.errors.push("Not a valid test"),h=this.hasFinishedInTime(),void 0===h||h||(g+=1),j=this.isUnitTest()&&this.results.test?1:0,j+=void 0!==this.timeout&&this.results.timeout?1:0,this.testFunction&&void 0!==this.timeout&&(h=this.hasFinishedInTime(),void 0===h||h||(j+=1)),l=this.isUnitTest()?1:0,l+=void 0!==this.timeout;for(i in this.sections)f+=this.sections[i].countErrors(),g+=this.sections[i].countFailedTests(),j+=this.sections[i].countSuccessfulTests(),l+=this.sections[i].countTotalTests();for(k in this.nexts)f+=this.nexts[i].countErrors(),g+=this.nexts[k].countFailedTests(),j+=this.nexts[k].countSuccessfulTests(),l+=this.nexts[k].countTotalTests();void 0!==this.results.count.total&&(a=f-this.results.count.errors,b=g-this.results.count.fails,c=j-this.results.count.successes,d=l-this.results.count.total),this.results.count={errors:f,fails:g,successes:j,total:l}}void 0!==this.parent&&void 0!==this.parent.results.count.total&&this.parent.refresh(a,b,c,d),this.getDOM()&&this.getDOM().refresh()}},k.prototype.setDOM=function(a){this.domTest=a},k.prototype.then=function(a,b,c){var d,e,f,g,h;return 1===arguments.length?(h=void 0,f=a):2==arguments.length?"string"==typeof a?(h=a,f=b):(h=void 0,f=a,d=b):3===arguments.length&&(h=a,f=b,d=c),void 0!=f&&(g=new k({async:!0,context:this.childContext,enabled:this.enabled,executionDelay:!1,strict:this.strictMode,parent:this,project:this.getProject(),promiseRole:"then",title:h,value:f}),this.nexts.push(g)),void 0!=d&&(e=new k({async:!0,context:this.childContext,enabled:this.enabled,executionDelay:!1,strict:this.strictMode,parent:this,project:this.getProject(),promiseRole:"catch",title:h,value:d}),this.catchTests.push(e)),this.refresh(),void 0!=g?g.getPromise():e.getPromise()},k.prototype.todo=function(a){return this.toDoList.push(a),this.getPromise()},k.prototype.toString=function(){return this.title+" : "+(this.isSuccessful()?"success":"fail")+" ("+this.countSuccessfulTests()+"/"+this.countTotalTests()+")"},k.get=function(a){return k.ALL[a]},k.lastId=0,k.ALL=[],k.TYPES={test:"test",unit:"unit"};var l=function(a){this.name=a.name,this.test=a.test,this.strictTest=a.strict,this.onerror=void 0===a.onerror?!1:a.onerror};l.add=function(a){var b;b=new l(a),l.all[b.name]=b},l.all={},l.add({name:"contains",test:function(a,b){return a.indexOf(b)}}),l.add({name:"equal",test:function(a,b,c){return a==(3===arguments.length?c:b)},strict:function(a,b,c){return a===(3===arguments.length?c:b)}}),l.add({name:"isBetween",test:function(a,b,c){return a>=b&&c>=a}}),l.add({name:"isDefined",test:function(a){return void 0!=a},strict:function(a){return void 0!==a}}),l.add({name:"isDifferentThan",test:function(a,b){return a!=b},strict:function(a,b){return a!==b}}),l.add({name:"isFalse",test:function(a){return!a},strict:function(a){return a===!1}}),l.add({name:"isGreaterOrEqualThan",test:function(a,b){return a>=b}}),l.add({name:"isGreaterThan",test:function(a,b){return a>b}}),l.add({name:"isInstanceOf",test:function(a,b){return a instanceof b}}),l.add({name:"isLesserOrEqualThan",test:function(a,b){return b>=a}}),l.add({name:"isLesserThan",test:function(a,b){return b>a}}),l.add({name:"isNull",test:function(a){return null==a},strict:function(a){return null===a}}),l.add({name:"isTrue",test:function(a){return!!a},strict:function(a){return a===!0}}),l.add({name:"isUndefined",test:function(a){return void 0==a},strict:function(a){return void 0===a}}),l.add({name:"throwValue",onerror:!0,test:function(a,b){return a==b},strict:function(a,b){return a===b}}),l.add({name:"throw",onerror:!0,test:function(a,b){return a instanceof b}}),k.TEST_TYPES={};var m=function(){return this.test.testType=this.type,this.test.testParameters=Array.prototype.slice.call(arguments,0),this.test.testParametersExport=h.copy(this.test.testParameters),this.test.calculated=!1,this.test.errorExpected=this.type.onerror,this.test.refresh(),this.promise},n=function(a){k.call(this,{project:this,title:a}),this.name=name?name:"Test",this.authors=[],this.domProject=new r(this)};n.prototype=Object.create(k.prototype),n.prototype.constructor=n,n.prototype.addAuthor=function(a){this.authors.push(a)},n.prototype.display=function(a){a=a?a:"body",document.addEventListener("DOMContentLoaded",function(){this.domProject.display(a)}.bind(this))},n.prototype.getAuthors=function(){return this.authors.slice(0)},n.prototype.getTime=function(a){return void 0!==a?a-this.getStartDate():void 0},n.prototype.isUnitTest=function(){return!1},n.prototype.isValid=function(){return!0},n.prototype.setTitle=function(a){this.title=a};var o=function(a){this.test=a,this.testFunction=this.test.getTestFunction(),this.childContext=this.test.childContext,this.async=this.test.async,this.context=this.test.context};o.prototype.done=function(){this.endDate=new Date},o.prototype.execute=function(){var a,b,c;c=[this.test.childContext],1===arguments.length&&c.push(arguments[0]),b=this.context.info,this.context.reset(t,this.childContext._info(t)),this.startDate=new Date;try{this.result=this.testFunction.apply(void 0,c)}catch(a){this.throwError=!0,this.error=a}return this.result instanceof Promise?this.result.then(function(a){return this.endDate=void 0===this.endDate?new Date:this.endDate,this.result=a,this.result}.bind(this),function(a){this.endDate=void 0===this.endDate?new Date:this.endDate,this.throwError=!0,this.error=a}.bind(this)):this.endDate=void 0===this.endDate?new Date:this.endDate,this.context.reset(t,b),this.result},o.prototype.hasFinished=function(){return void 0!==this.endDate},o.prototype.getDuration=function(a){var b;return b=void 0!==this.endDate?this.endDate:a?Date.now():void 0,void 0!==b?b-this.startDate:void 0},o.prototype.getEndDate=function(){return this.endDate},o.prototype.getStartDate=function(){return this.startDate};var p=function(a){this.test=a,this.test.setDOM(this),this.childTests=[],this.collapsed=!0};p.prototype.buildDOM=function(a){var b,c,d,e,f;if(this.collapsed=a,c=this.getTemplateData(),this.dom=h.render2dom(this.getTemplate(),c),e=this.dom.querySelector("header"),e.addEventListener("click",function(a){var b;this.collapsed?this.dom.classList.remove("collapsed"):this.dom.classList.add("collapsed"),b=this.dom,this.buildDOM(!this.collapsed),b.parentElement.replaceChild(this.dom,b),a.stopPropagation()}.bind(this)),this.collapsed)for(b in this.childTests)this.childTests[b].destroy();else{d=this.dom.querySelector("div#tests"),this.childTests=this.getChildTests();for(f in this.childTests)d.appendChild(this.childTests[f].getDOM());d=this.dom.querySelector("div#thenTests"),this.thenTests=this.getThenTests();for(f in this.thenTests)d.appendChild(this.thenTests[f].getDOM())}},p.prototype.destroy=function(){var a;this.test.setDOM(void 0),void 0!==this.dom&&(null!==this.dom.parentElement&&void 0!==this.dom.parentElement&&this.dom.parentElement.removeChild(this.dom),this.dom=void 0);for(a in this.childTests)this.childTests[a].destroy()},p.prototype.getDOM=function(a){return a=void 0===a?this.collapsed:!!a,void 0!==this.dom&&a===this.collapsed||this.buildDOM(a),this.dom},p.prototype.getTemplateData=function(){var a,b,c,d;return d=this.test.getStartTime(),b=this.test.getEndTime(),void 0!==b&&(a=(b-d)/1e3),c=this.test.countFailedTests(),{async:this.test.async,collapsed:this.collapsed,comments:this.test.getComments(),description:this.test.getDescription(),duration:a,endTime:h.time2string(b),errors:this.test.errors.slice(0),isGroup:this.test.isGroup(),lang:e.test,notes:this.test.getNotes(),result:this.test.getResult(),severalFails:c>1,startTime:h.time2string(d),strict:this.test.strictMode,success:this.test.isSuccessful(),thens:this.test.getNexts(),title:this.test.getTitle(),toDoList:this.test.getToDoList(),totalFails:c,totalSuccesses:this.test.countSuccessfulTests(),totalTests:this.test.countTotalTests()}},p.prototype.getTest=function(){return this.test},p.prototype.getChildTests=function(){var a,b,c,d;this.test.sections[0].isDefault()?(d=this.test.sections[0].getTests(),b=this.test.getSections(),b.shift()):d=this.test.getSections(),a=[],d=d.concat(b);for(c in d)void 0!==d[c].getDOM()?a.push(d[c].getDOM()):d[c]instanceof i?a.push(new q(d[c])):a.push(new p(d[c]));return a},p.prototype.getThenTests=function(){var a,b,c;a=[],c=this.test.getNexts();for(b in c)a.push(new p(c[b]));return a},p.prototype.getTemplate=function(){return'<div class="test {{#success}}pass{{/success}}{{^success}}fail{{/success}} {{#collapsed}}collapsed{{/collapsed}} {{#isGroup}}group{{/isGroup}} {{#severalFails}}severalFails{{/severalFails}}"><header><div id="title">{{#title}}{{title}}{{/title}}{{^title}}<span style="font-style: italic">no title</span>{{/title}}</div><div id="description">{{{description}}}</div><div id="fails">{{totalFails}}</div><div id="successes">{{totalSuccesses}}</div><div id="countTests">{{totalTests}}</div><div id="successesByTests">{{totalSuccesses}}/{{totalTests}}</div>{{#errors}}<div class="errorReason">{{{.}}}</div>{{/errors}}{{#toDoList}}<div class="todo">{{{.}}}</div>{{/toDoList}}{{#comments}}<div class="comment">{{{.}}}</div>{{/comments}}{{#notes}}<div class="note">{{{.}}}</div>{{/notes}}</header><div id="tests"></div><div id="thenTests"></div></div>';
},p.prototype.refresh=function(){var a;void 0!==this.dom&&(a=this.dom,this.buildDOM(this.collapsed),a.parentElement.replaceChild(this.dom,a))};var q=function(a){p.call(this,a),this.section=a};q.prototype.buildDOM=function(a){p.prototype.buildDOM.call(this,a)},q.prototype.destroy=function(){p.prototype.destroy.apply(this,arguments)},q.prototype.getChildTests=function(){var a,b,c;c=this.test.getTests(),a=[];for(b in c)void 0!==c[b].getDOM()?a.push(c[b].getDOM()):a.push(new p(c[b]));return a},q.prototype.getDOM=function(a){return a=void 0===a?this.collapsed:!!a,void 0!==this.dom&&a===this.collapsed||this.buildDOM(a),this.dom},q.prototype.getTemplateData=function(){var a,b,c;return c=this.section.getStartTime(),b=this.section.getEndTime(),void 0!==b&&(a=b-c),{collapsed:this.collapsed,totalFails:this.section.countFailedTests(),totalSuccesses:this.section.countSuccessfulTests(),totalTests:this.section.countTotalTests(),description:this.section.getDescription(),duration:a,endTime:h.time2string(b),lang:e.section,startTime:h.time2string(c),success:this.section.isSuccessful(),title:this.section.getTitle()}},q.prototype.getTemplate=function(){return'<div class="test group {{#success}}pass{{/success}}{{^success}}fail{{/success}} {{#collapsed}}collapsed{{/collapsed}} {{#severalFails}}severalFails{{/severalFails}}"><header><div id="title">{{title}}</div><div id="description">{{description}}</div><div id="fails">{{totalFails}}</div><div id="successes">{{totalSuccesses}}</div><div id="countTests">{{totalTests}}</div><div id="successesByTests">{{totalSuccesses}}/{{totalTests}}</div>{{#toDoList}}<div class="todo">{{.}}</div>{{/toDoList}}{{#comments}}<div class="comment">{{.}}</div>{{/comments}}</header><div id="tests"></div><div id="nexts"></div></div>'};var r=function(a){p.call(this,a),this.project=a,this.collapsed=!1};r.prototype=Object.create(p.prototype),r.prototype.constructor=r,r.prototype.buildDOM=function(a){this.globalDOM=document.createElement("div"),this.globalDOM.classList.add("testJS"),p.prototype.buildDOM.call(this,a),this.dom.classList.remove("test"),this.dom.classList.add("project"),this.globalDOM.appendChild(this.dom)},r.prototype.display=function(a){var b;b=a instanceof HTMLElement?a:document.querySelector(a),this.buildDOM(!1),b.appendChild(this.globalDOM)},r.prototype.getTemplateData=function(){var a;return a=p.prototype.getTemplateData.call(this),a.authors=this.project.getAuthors(),a};var s=new n,t={};return j(s)}(void 0,{Console_groupCollapsed:console.groupCollapsed,Console_groupEnd:console.groupEnd,Console_warn:console.warn,Console_log:console.log});c["default"]=e,window&&(window.test=e)},{mustache:1}]},{},[2]);