!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){!function(a,b){"object"==typeof c&&c&&"string"!=typeof c.nodeName?b(c):"function"==typeof define&&define.amd?define(["exports"],b):(a.Mustache={},b(a.Mustache))}(this,function(a){function b(a){return"function"==typeof a}function c(a){return p(a)?"array":typeof a}function d(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function e(a,b){return null!=a&&"object"==typeof a&&b in a}function f(a,b){return q.call(a,b)}function g(a){return!f(r,a)}function h(a){return String(a).replace(/[&<>"'`=\/]/g,function(a){return s[a]})}function i(b,c){function e(){if(r&&!s)for(;q.length;)delete o[q.pop()];else q=[];r=!1,s=!1}function f(a){if("string"==typeof a&&(a=a.split(u,2)),!p(a)||2!==a.length)throw new Error("Invalid tags: "+a);h=new RegExp(d(a[0])+"\\s*"),i=new RegExp("\\s*"+d(a[1])),m=new RegExp("\\s*"+d("}"+a[1]))}if(!b)return[];var h,i,m,n=[],o=[],q=[],r=!1,s=!1;f(c||a.tags);for(var y,z,A,B,C,D,E=new l(b);!E.eos();){if(y=E.pos,A=E.scanUntil(h))for(var F=0,G=A.length;G>F;++F)B=A.charAt(F),g(B)?q.push(o.length):s=!0,o.push(["text",B,y,y+1]),y+=1,"\n"===B&&e();if(!E.scan(h))break;if(r=!0,z=E.scan(x)||"name",E.scan(t),"="===z?(A=E.scanUntil(v),E.scan(v),E.scanUntil(i)):"{"===z?(A=E.scanUntil(m),E.scan(w),E.scanUntil(i),z="&"):A=E.scanUntil(i),!E.scan(i))throw new Error("Unclosed tag at "+E.pos);if(C=[z,A,y,E.pos],o.push(C),"#"===z||"^"===z)n.push(C);else if("/"===z){if(D=n.pop(),!D)throw new Error('Unopened section "'+A+'" at '+y);if(D[1]!==A)throw new Error('Unclosed section "'+D[1]+'" at '+y)}else"name"===z||"{"===z||"&"===z?s=!0:"="===z&&f(A)}if(D=n.pop())throw new Error('Unclosed section "'+D[1]+'" at '+E.pos);return k(j(o))}function j(a){for(var b,c,d=[],e=0,f=a.length;f>e;++e)b=a[e],b&&("text"===b[0]&&c&&"text"===c[0]?(c[1]+=b[1],c[3]=b[3]):(d.push(b),c=b));return d}function k(a){for(var b,c,d=[],e=d,f=[],g=0,h=a.length;h>g;++g)switch(b=a[g],b[0]){case"#":case"^":e.push(b),f.push(b),e=b[4]=[];break;case"/":c=f.pop(),c[5]=b[2],e=f.length>0?f[f.length-1][4]:d;break;default:e.push(b)}return d}function l(a){this.string=a,this.tail=a,this.pos=0}function m(a,b){this.view=a,this.cache={".":this.view},this.parent=b}function n(){this.cache={}}var o=Object.prototype.toString,p=Array.isArray||function(a){return"[object Array]"===o.call(a)},q=RegExp.prototype.test,r=/\S/,s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},t=/\s*/,u=/\s+/,v=/\s*=/,w=/\s*\}/,x=/#|\^|\/|>|\{|&|=|!/;l.prototype.eos=function(){return""===this.tail},l.prototype.scan=function(a){var b=this.tail.match(a);if(!b||0!==b.index)return"";var c=b[0];return this.tail=this.tail.substring(c.length),this.pos+=c.length,c},l.prototype.scanUntil=function(a){var b,c=this.tail.search(a);switch(c){case-1:b=this.tail,this.tail="";break;case 0:b="";break;default:b=this.tail.substring(0,c),this.tail=this.tail.substring(c)}return this.pos+=b.length,b},m.prototype.push=function(a){return new m(a,this)},m.prototype.lookup=function(a){var c,d=this.cache;if(d.hasOwnProperty(a))c=d[a];else{for(var f,g,h=this,i=!1;h;){if(a.indexOf(".")>0)for(c=h.view,f=a.split("."),g=0;null!=c&&g<f.length;)g===f.length-1&&(i=e(c,f[g])),c=c[f[g++]];else c=h.view[a],i=e(h.view,a);if(i)break;h=h.parent}d[a]=c}return b(c)&&(c=c.call(this.view)),c},n.prototype.clearCache=function(){this.cache={}},n.prototype.parse=function(a,b){var c=this.cache,d=c[a];return null==d&&(d=c[a]=i(a,b)),d},n.prototype.render=function(a,b,c){var d=this.parse(a),e=b instanceof m?b:new m(b);return this.renderTokens(d,e,c,a)},n.prototype.renderTokens=function(a,b,c,d){for(var e,f,g,h="",i=0,j=a.length;j>i;++i)g=void 0,e=a[i],f=e[0],"#"===f?g=this.renderSection(e,b,c,d):"^"===f?g=this.renderInverted(e,b,c,d):">"===f?g=this.renderPartial(e,b,c,d):"&"===f?g=this.unescapedValue(e,b):"name"===f?g=this.escapedValue(e,b):"text"===f&&(g=this.rawValue(e)),void 0!==g&&(h+=g);return h},n.prototype.renderSection=function(a,c,d,e){function f(a){return g.render(a,c,d)}var g=this,h="",i=c.lookup(a[1]);if(i){if(p(i))for(var j=0,k=i.length;k>j;++j)h+=this.renderTokens(a[4],c.push(i[j]),d,e);else if("object"==typeof i||"string"==typeof i||"number"==typeof i)h+=this.renderTokens(a[4],c.push(i),d,e);else if(b(i)){if("string"!=typeof e)throw new Error("Cannot use higher-order sections without the original template");i=i.call(c.view,e.slice(a[3],a[5]),f),null!=i&&(h+=i)}else h+=this.renderTokens(a[4],c,d,e);return h}},n.prototype.renderInverted=function(a,b,c,d){var e=b.lookup(a[1]);return!e||p(e)&&0===e.length?this.renderTokens(a[4],b,c,d):void 0},n.prototype.renderPartial=function(a,c,d){if(d){var e=b(d)?d(a[1]):d[a[1]];return null!=e?this.renderTokens(this.parse(e),c,d,e):void 0}},n.prototype.unescapedValue=function(a,b){var c=b.lookup(a[1]);return null!=c?c:void 0},n.prototype.escapedValue=function(b,c){var d=c.lookup(b[1]);return null!=d?a.escape(d):void 0},n.prototype.rawValue=function(a){return a[1]},a.name="mustache.js",a.version="2.2.1",a.tags=["{{","}}"];var y=new n;a.clearCache=function(){return y.clearCache()},a.parse=function(a,b){return y.parse(a,b)},a.render=function(a,b,d){if("string"!=typeof a)throw new TypeError('Invalid template! Template should be a "string" but "'+c(a)+'" was given as the first argument for mustache#render(template, view, partials)');return y.render(a,b,d)},a.to_html=function(c,d,e,f){var g=a.render(c,d,e);return b(f)?void f(g):g},a.escape=h,a.Scanner=l,a.Context=m,a.Writer=n})},{}],2:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./Section"),f=d(e),g=a("./TestUnit"),h=d(g),i=a("./private"),j=function(a,b,c,d){var e,g,i,j,k;return 1===arguments.length?this.info.enabled?(g=new f["default"](this.info.project,a,!1,this.info.test),this.info.test.sections.push(g),g):this.context:(this.info.delay?(e=b,k=c,j=d):(e=!1,k=b,j=c),g=this.info.test.sections[this.info.test.sections.length-1],i=new h["default"]({async:this.info.async,context:this,enabled:this.info.enabled,executionDelay:e,strict:this.info.strict,parent:g,project:this.info.project,value:k,timeout:j,title:a}),g.addTest(i),this.reset(),i.getPromise())},k=function(){return this.info.enabled&&(this.info.async=!0),this.context},l=function(a){var b,c;return b={info:{async:!1,enabled:!0,delay:!1,strict:!1,test:a,project:a.getProject()}},c=j.bind(b),c.console=n.bind(b),c.comment=m.bind(b),c.describe=q.bind(b),c.disable=p.bind(b),c.display=r.bind(b),c.done=s.bind(b),c.getData=t.bind(b),c.note=v.bind(b),c.constructors={Test:h["default"]},c.reset=y.bind(b),c.todo=A.bind(b),c._info=u.bind(b),Object.defineProperties(c,{async:{get:k.bind(b)},delay:{get:o.bind(b)},parent:{get:w.bind(b)},project:{get:x.bind(b)},strict:{get:z.bind(b)}}),b.context=c,b.reset=c.reset,c},m=function(a){return this.info.test.comment(a),this.context},n=function(a){return this.info.enabled&&this.info.test.console(a),this.context},o=function(){return this.info.enabled&&(this.info.delay=!0),this.context},p=function(){return this.info.enabled&&(this.info.enabled=!1),this.context},q=function(a){return this.info.test.describe(a),this.context},r=function(a){this.info.project.display(a)},s=function(){return this.info.enabled&&this.info.test.done(),this.context},t=function(a){var b;return b=this.info.test.getData(a),{endTime:this.info.test.getEndTime(),failed:this.info.test.countFailedTests(),sections:b.sections,startTime:this.info.test.getStartTime(),success:this.info.test.countSuccessfulTests(),tests:this.info.test.countTotalTests()}},u=function(a){if(a!==i.token)throw"Invalid token";return this.info},v=function B(B){return this.info.test.note(B),this.context},w=function(){return this.info.test},x=function(){return this.info.test.project},y=function(a,b){var c;return a===i.token?(c=this.info,this.info=b,c):this.info.enabled?(this.info.async=!1,this.info.strict=!1,this.info.enabled=!0,this.info.delay=!1,this.context):this.context},z=function(){return this.info.enabled&&(this.info.strict=!0),this.context},A=function(a){return this.info.test.todo(a),this.context};c["default"]=l},{"./Section":7,"./TestUnit":10,"./private":15}],3:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./DOMTest"),f=d(e),g=function(a){f["default"].call(this,a),this.project=a,this.collapsed=!1};g.prototype=Object.create(f["default"].prototype),g.prototype.constructor=g,g.prototype.buildDOM=function(a){this.globalDOM=document.createElement("div"),this.globalDOM.classList.add("testJS"),f["default"].prototype.buildDOM.call(this,a),this.dom.classList.remove("test"),this.dom.classList.add("project"),this.globalDOM.appendChild(this.dom)},g.prototype.display=function(a){var b;b=a instanceof HTMLElement?a:document.querySelector(a),this.buildDOM(!1),b.appendChild(this.globalDOM)},g.prototype.getTemplateData=function(){var a;return a=f["default"].prototype.getTemplateData.call(this),a.authors=this.project.getAuthors(),a},c["default"]=g},{"./DOMTest":5}],4:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./DOMTest"),f=d(e),g=a("./lang"),h=d(g),i=function(a){f["default"].call(this,a),this.section=a};i.prototype.buildDOM=function(a){f["default"].prototype.buildDOM.call(this,a)},i.prototype.destroy=function(){f["default"].prototype.destroy.apply(this,arguments)},i.prototype.getChildTests=function(){var a,b,c;c=this.test.getTests(),a=[];for(b in c)void 0!==c[b].getDOM()?a.push(c[b].getDOM()):a.push(new f["default"](c[b]));return a},i.prototype.getDOM=function(a){return a=void 0===a?this.collapsed:!!a,void 0!==this.dom&&a===this.collapsed||this.buildDOM(a),this.dom},i.prototype.getTemplateData=function(){var a,b,c;return c=this.section.getStartTime(),b=this.section.getEndTime(),void 0!==b&&(a=b-c),{collapsed:this.collapsed,totalFails:this.section.countFailedTests(),totalSuccesses:this.section.countSuccessfulTests(),totalTests:this.section.countTotalTests(),description:this.section.getDescription(),duration:a,endTime:common.time2string(b),lang:h["default"].section,startTime:common.time2string(c),success:this.section.isSuccessful(),title:this.section.getTitle()}},i.prototype.getTemplate=function(){return'<div class="test group {{#success}}pass{{/success}}{{^success}}fail{{/success}} {{#collapsed}}collapsed{{/collapsed}} {{#severalFails}}severalFails{{/severalFails}}"><header><div id="title">{{title}}</div><div id="description">{{description}}</div><div id="fails">{{totalFails}}</div><div id="successes">{{totalSuccesses}}</div><div id="countTests">{{totalTests}}</div><div id="successesByTests">{{totalSuccesses}}/{{totalTests}}</div>{{#toDoList}}<div class="todo">{{.}}</div>{{/toDoList}}{{#comments}}<div class="comment">{{.}}</div>{{/comments}}</header><div id="tests"></div><div id="nexts"></div></div>'},c["default"]=i},{"./DOMTest":5,"./lang":13}],5:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var f=a("./DOMSection"),g=e(f),h=a("./lang"),i=e(h),j=a("./Section"),k=e(j),l=a("./common"),m=d(l),n=function(a){this.test=a,this.test.setDOM(this),this.childTests=[],this.collapsed=!0};n.prototype.buildDOM=function(a){var b,c,d,e,f;if(this.collapsed=a,c=this.getTemplateData(),this.dom=m.render2dom(this.getTemplate(),c),e=this.dom.querySelector("header"),e.addEventListener("click",function(a){var b;this.collapsed?this.dom.classList.remove("collapsed"):this.dom.classList.add("collapsed"),b=this.dom,this.buildDOM(!this.collapsed),b.parentElement.replaceChild(this.dom,b),a.stopPropagation()}.bind(this)),this.collapsed)for(b in this.childTests)this.childTests[b].destroy();else{d=this.dom.querySelector("div#tests"),this.childTests=this.getChildTests();for(f in this.childTests)d.appendChild(this.childTests[f].getDOM());d=this.dom.querySelector("div#thenTests"),this.thenTests=this.getThenTests();for(f in this.thenTests)d.appendChild(this.thenTests[f].getDOM())}},n.prototype.destroy=function(){var a;this.test.setDOM(void 0),void 0!==this.dom&&(null!==this.dom.parentElement&&void 0!==this.dom.parentElement&&this.dom.parentElement.removeChild(this.dom),this.dom=void 0);for(a in this.childTests)this.childTests[a].destroy()},n.prototype.getDOM=function(a){return a=void 0===a?this.collapsed:!!a,void 0!==this.dom&&a===this.collapsed||this.buildDOM(a),this.dom},n.prototype.getTemplateData=function(){var a,b,c,d;return d=this.test.getStartTime(),b=this.test.getEndTime(),void 0!==b&&(a=(b-d)/1e3),c=this.test.countFailedTests(),{async:this.test.async,collapsed:this.collapsed,comments:this.test.getComments(),description:this.test.getDescription(),duration:a,endTime:m.time2string(b),errors:this.test.errors.slice(0),isGroup:this.test.isGroup(),lang:i["default"].test,notes:this.test.getNotes(),result:this.test.getResult(),severalFails:c>1,startTime:m.time2string(d),strict:this.test.strictMode,success:this.test.isSuccessful(),thens:this.test.getNexts(),title:this.test.getTitle(),toDoList:this.test.getToDoList(),totalFails:c,totalSuccesses:this.test.countSuccessfulTests(),totalTests:this.test.countTotalTests()}},n.prototype.getTest=function(){return this.test},n.prototype.getChildTests=function(){var a,b,c,d;this.test.sections[0].isDefault()?(d=this.test.sections[0].getTests(),b=this.test.getSections(),b.shift()):d=this.test.getSections(),a=[],d=d.concat(b);for(c in d)void 0!==d[c].getDOM()?a.push(d[c].getDOM()):d[c]instanceof k["default"]?a.push(new g["default"](d[c])):a.push(new n(d[c]));return a},n.prototype.getThenTests=function(){var a,b,c;a=[],c=this.test.getNexts();for(b in c)a.push(new n(c[b]));return a},n.prototype.getTemplate=function(){return'<div class="test {{#success}}pass{{/success}}{{^success}}fail{{/success}} {{#collapsed}}collapsed{{/collapsed}} {{#isGroup}}group{{/isGroup}} {{#severalFails}}severalFails{{/severalFails}}"><header><div id="title">{{#title}}{{title}}{{/title}}{{^title}}<span style="font-style: italic">no title</span>{{/title}}</div><div id="description">{{{description}}}</div><div id="fails">{{totalFails}}</div><div id="successes">{{totalSuccesses}}</div><div id="countTests">{{totalTests}}</div><div id="successesByTests">{{totalSuccesses}}/{{totalTests}}</div>{{#errors}}<div class="errorReason">{{{.}}}</div>{{/errors}}{{#toDoList}}<div class="todo">{{{.}}}</div>{{/toDoList}}{{#comments}}<div class="comment">{{{.}}}</div>{{/comments}}{{#notes}}<div class="note">{{{.}}}</div>{{/notes}}</header><div id="tests"></div><div id="thenTests"></div></div>'},n.prototype.refresh=function(){var a;void 0!==this.dom&&(a=this.dom,this.buildDOM(this.collapsed),a.parentElement.replaceChild(this.dom,a))},c["default"]=n},{"./DOMSection":4,"./Section":7,"./common":11,"./lang":13}],6:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./DOMProject"),f=d(e),g=a("./TestUnit"),h=d(g),i=function(a){h["default"].call(this,{project:this,title:a}),this.name=name?name:"Test",this.authors=[],this.domProject=new f["default"](this)};i.prototype=Object.create(h["default"].prototype),i.prototype.constructor=i,i.prototype.addAuthor=function(a){this.authors.push(a)},i.prototype.display=function(a){a=a?a:"body",document.addEventListener("DOMContentLoaded",function(){this.domProject.display(a)}.bind(this))},i.prototype.getAuthors=function(){return this.authors.slice(0)},i.prototype.getTime=function(a){return void 0!==a?a-this.getStartDate():void 0},i.prototype.isUnitTest=function(){return!1},i.prototype.isValid=function(){return!0},i.prototype.setTitle=function(a){this.title=a},c["default"]=i},{"./DOMProject":3,"./TestUnit":10}],7:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=Promise.resolve(),e=function f(a,b,c,d){this.id=f.maxID++,this.title=b,this.tests=[],this.project=a,this.parent=d,this.defaultSection=c,this.results={count:{errors:0,fails:0,successes:0,total:0}}};e.prototype.addTest=function(a){var b;if(this.tests.push(a),this.asyncTests===!1&&a.hasAsyncTests())for(this.asyncTests=!0,b=this.parent;void 0!==b&&(b?b:{}).asyncTests!==!0;)b.asyncTests=!0,b=b.parent;this.refresh()},e.prototype.refresh=function(a,b,c,d){var e,f,g,h,i;if(void 0!==d&&void 0!==this.results.count.fails)this.results.count.errors+=a,this.results.count.fails+=b,this.results.count.successes+=c,this.results.count.total+=d;else{e=this.results.count.errors,f=this.results.count.fails,g=this.results.count.successes,i=this.results.count.total,this.results.count.errors=0,this.results.count.fails=0,this.results.count.successes=0,this.results.count.total=0;for(h in this.tests)this.results.count.errors+=this.tests[h].countErrors(),this.results.count.fails+=this.tests[h].countFailedTests(),this.results.count.successes+=this.tests[h].countSuccessfulTests(),this.results.count.total+=this.tests[h].countTotalTests();void 0!==this.results.count.total&&(a=e-this.results.count.errors,b=f-this.results.count.fails,c=g-this.results.count.successes,d=i-this.results.count.total)}void 0!==this.parent&&void 0!==this.parent.results.count.total&&this.parent.refresh(a,b,c,d),this.getDOM()&&this.getDOM().refresh()},e.prototype.console=function(a){var b,c,d;b=this.countSuccessfulTests(),d=this.countTotalTests(),nonStrictFunction.groupCollapsed((void 0!==this.getTitle()?this.getTitle()+" : ":"")+(b===d?"success":"fail")+" : "+b+"/"+d);for(c in this.tests)a&&this.tests[c].isSuccessful()||this.tests[c].console(a);nonStrictFunction.groupEnd()},e.prototype.countErrors=function(){return this.results.count.errors},e.prototype.countFailedTests=function(){return this.results.count.fails},e.prototype.countSuccessfulTests=function(){return this.results.count.successes},e.prototype.countTotalTests=function(){return this.results.count.total},e.prototype["catch"]=function(){return this._hasFinished=!1,Promise.prototype["catch"].apply(this.getPromise(),arguments)},e.prototype.describe=function(a){this.description=a},e.prototype.getPromise=function(){return void 0===this.promise&&(this.promise=d),this.promise},e.prototype.getCompletedPromise=function(){var a,b;b=[];for(a in this.tests)b.push(this.tests[a].getCompletedPromise());return Promise.all(b)},e.prototype.getData=function(a){var b,c;c=[],a=void 0===a?!1:a;for(b in this.tests)a&&this.tests[b].isSuccessful()||c.push(this.tests[b].getData());return{tests:c,title:this.title}},e.prototype.getDescription=function(){return this.description},e.prototype.getDOM=function(){return this.domSection},e.prototype.getEndDate=function(){0!==this.tests.length&&this.tests[this.tests.length-1].getEndDate()},e.prototype.getEndTime=function(){return this.project.getTime(this.getEndDate())},e.prototype.getStartDate=function(){return 0!==this.tests.length?this.tests[0].getStartDate():void 0},e.prototype.getStartTime=function(){return this.project.getTime(this.getStartDate())},e.prototype.getTests=function(){return this.tests.slice(0)},e.prototype.getTitle=function(){return this.title?this.title:""},e.prototype.hasAsyncTests=function(){var a;if(void 0!==this.asyncTests)return!0;for(a in this.tests)if(this.tests[a].hasAsyncTests())return this.asyncTests=!0,!0;return!1},e.prototype.hasFinished=function(){var a;if(this._hasFinished)return this._hasFinished;for(a in this.tests)if(!this.tests[a].hasFinished())return!1;return this._hasFinished=!0,this._hasFinished},e.prototype.isDefault=function(){return this.defaultSection},e.prototype.isSuccessful=function(){var a;if(!this.hasFinished())return!1;for(a in this.tests)if(!this.tests[a].isSuccessful())return!1;return!0},e.prototype.setDOM=function(a){this.domSection=a},e.prototype.then=function(){return this._hasFinished=!1,Promise.prototype.then.apply(this.getPromise(),arguments)},e.maxID=0,c["default"]=e},{}],8:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=a("./private"),e=function(a){this.test=a,this.testFunction=this.test.getTestFunction(),this.childContext=this.test.childContext,this.async=this.test.async,this.context=this.test.context};e.prototype.done=function(){this.endDate=new Date},e.prototype.execute=function(){var a,b,c;c=[this.test.childContext],1===arguments.length&&c.push(arguments[0]),b=this.context.info,this.context.reset(d.token,this.childContext._info(d.token)),this.startDate=new Date;try{this.result=this.testFunction.apply(void 0,c)}catch(a){this.throwError=!0,this.error=a}return this.result instanceof Promise?this.result.then(function(a){return this.endDate=void 0===this.endDate?new Date:this.endDate,this.result=a,this.result}.bind(this),function(a){this.endDate=void 0===this.endDate?new Date:this.endDate,this.throwError=!0,this.error=a}.bind(this)):this.endDate=void 0===this.endDate?new Date:this.endDate,this.context.reset(d.token,b),this.result},e.prototype.hasFinished=function(){return void 0!==this.endDate},e.prototype.getDuration=function(a){var b;return b=void 0!==this.endDate?this.endDate:a?Date.now():void 0,void 0!==b?b-this.startDate:void 0},e.prototype.getEndDate=function(){return this.endDate},e.prototype.getStartDate=function(){return this.startDate},c["default"]=e},{"./private":15}],9:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=function(a){this.name=a.name,this.test=a.test,this.strictTest=a.strict,this.onerror=void 0===a.onerror?!1:a.onerror};d.add=function(a){var b;b=new d(a),d.all[b.name]=b},d.all={},d.add({name:"contains",test:function(a,b){return a.indexOf(b)}}),d.add({name:"equal",test:function(a,b,c){return a==(3===arguments.length?c:b)},strict:function(a,b,c){return a===(3===arguments.length?c:b)}}),d.add({name:"isBetween",test:function(a,b,c){return a>=b&&c>=a}}),d.add({name:"isDefined",test:function(a){return void 0!=a},strict:function(a){return void 0!==a}}),d.add({name:"isDifferentThan",test:function(a,b){return a!=b},strict:function(a,b){return a!==b}}),d.add({name:"isFalse",test:function(a){return!a},strict:function(a){return a===!1}}),d.add({name:"isGreaterOrEqualThan",test:function(a,b){return a>=b}}),d.add({name:"isGreaterThan",test:function(a,b){return a>b}}),d.add({name:"isInstanceOf",test:function(a,b){return a instanceof b}}),d.add({name:"isLesserOrEqualThan",test:function(a,b){return b>=a}}),d.add({name:"isLesserThan",test:function(a,b){return b>a}}),d.add({name:"isNull",test:function(a){return null==a},strict:function(a){return null===a}}),d.add({name:"isTrue",test:function(a){return!!a},strict:function(a){return a===!0}}),d.add({name:"isUndefined",test:function(a){return void 0==a},strict:function(a){return void 0===a}}),d.add({name:"throwValue",onerror:!0,test:function(a,b){return a==b},strict:function(a,b){return a===b}}),d.add({name:"throw",onerror:!0,test:function(a,b){return a instanceof b}}),c["default"]=d},{}],10:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./Context"),f=d(e),g=a("./Section"),h=d(g),i=a("./TestExecution"),j=d(i),k=a("./TestType"),l=d(k),m=a("./functions"),n=function o(a){this.catchTests=[],this.calculated=!1,this.comments=[],this.completed=!1,this.context=a.context,this.creationDate=new Date,this.enabled=a.enabled,this.id=o.lastId++,this.nexts=[],this.notMode=!1,this.parent=a.parent,this.promiseRole=a.promiseRole,this.project=a.project,this.timeout=a.timeout,this.strictMode=a.strict,this.tests=[],this.title=a.title,this.value=a.value,this.executionDelay=a.executionDelay,this.errorExpected=!1,this.toDoList=[],this.errors=[],this.testType=void 0,this.notes=[],this.async=a.async||this.executionDelay!==!1||this.value instanceof Promise||this.value instanceof o,this._isClosed=!1,this.results={error:void 0,test:void 0,timeout:void 0,validity:void 0,count:{errors:0,fails:0,successes:0,total:0}},this.childContext=(0,f["default"])(this),this.currentSection=new h["default"](this.project,"",!0,this),this.sections=[this.currentSection],"function"==typeof this.value&&(this.testFunction=this.value,this.testExecution=new j["default"](this)),this.enabled&&(this.buildPromise(),this.execute())};n.prototype.buildPromise=function(){var a;this.promise=new Promise(function(a,b){this.fullfillPromise=a,this.rejectPromise=b}.bind(this)),this.promiseThenFunction=this.promise.then.bind(this.promise);for(a in l["default"].all)this.promise[a]=m.buildTest_execute.bind({test:this,type:l["default"].all[a],promise:this.promise});this.promise.todo=this.todo.bind(this),this.promise.comment=this.comment.bind(this),this.promise.describe=this.describe.bind(this),this.promise.note=this.note.bind(this),this.promise.getResult=this.getResult.bind(this),this.promise.then=this.then.bind(this),this.promise["catch"]=this["catch"].bind(this),Object.defineProperty(this.promise,"not",{get:function(){return this.not(),this.promise}.bind(this)}),this.promise.$=this},n.prototype.calcResult=function(){var a,b,c,d;if(d=this.errorExpected?this.error:this.value,c=this.testType?this.testType:l["default"].all.isTrue,!this.isUnitTest())return this.results.validity=this.isValid(),void(this.calculated=!0);if(this.results.validity=!0,a=[d].concat(this.testParameters),this.results.error&&!this.errorExpected)b=!1;else if(this.errorExpected&&!this.results.error)b=!1;else{try{b=this.strictMode&&void 0!==c.strictTest?c.strictTest.apply(void 0,a):c.test.apply(void 0,a)}catch(e){b=!1}this.notMode&&(b=!b)}this.results.test=b,this.calculated=!0},n.prototype["catch"]=function(a,b){return 1===arguments.length?this.then(void 0,a):this.then(a,void 0,b)},n.prototype.comment=function p(p){return this.comments.push(p),this.getPromise()},n.prototype.complete=function(a,b){this.completed=!0,!a&&this.testExecution&&(a=this.testExecution.throwError,a&&(b=this.testExecution.error)),a?(this.error=b,this.results.error=!0):this.value=b,this.refresh()},n.prototype.console=function(a){var b,c,d,e;if(a=a,d=this.countSuccessfulTests(),e=this.countTotalTests(),b=(void 0!==this.getTitle()?this.getTitle()+" : ":"")+(d===e?"success":"fail"),e>1){if(b+=" - "+d+"/"+e,nonStrictFunction.groupCollapsed(b),this.sections.length>1)for(c in this.sections)a&&this.sections[c].isSuccessful()||0!==this.sections[c].countTotalTests()&&this.sections[c].console(a);else for(c in tests)a&&tests[c].isSuccessful()||this.sections[0].tests[c].console();nonStrictFunction.groupEnd()}else this.isSuccessful()?nonStrictFunction.log(b):nonStrictFunction.warn(b);return this},n.prototype.countErrors=function(){return this.results.count.errors},n.prototype.countFailedTests=function(){return this.results.count.fails},n.prototype.countSuccessfulTests=function(){return this.results.count.successes},n.prototype.countTotalTests=function(){return this.results.count.total},n.prototype.describe=function(a){return this.description=a,this.promise},n.prototype.done=function(){return this.testExecution.done(),this.getPromise()},n.prototype.execute=function(){var a,b,c,d;this.enabled&&(this.async||this.value instanceof Promise?this.value.$ instanceof n?(d=function(){return this.value.$.getResult()}.bind(this),b=this.value.$.promiseThenFunction(d,d)):this.value instanceof Promise?b=this.value:this.executionDelay!==!1?(b=new Promise(function(b,d){a=b,c=d}),setTimeout(function(){try{a(this.testExecution.execute(this.value))}catch(b){c(b)}}.bind(this),this.executionDelay)):b=void 0===this.promiseRole?Promise.resolve().then(function(){return this.testExecution.execute(this.value)}.bind(this)):"then"===this.promiseRole?this.parent.promiseThenFunction(function(a){return this.testExecution.execute(a)}.bind(this)):this.parent.promiseThenFunction(void 0,function(a){return this.testExecution.execute(a)}.bind(this)):this.testFunction&&(this.value=this.testExecution.execute(),this.value instanceof Promise&&(b=this.value)),void 0!==b?b.$ instanceof n?b.$.promiseThenFunction(function(a){this.complete(!1,a)}.bind(this),function(a){this.complete(!0,a)}.bind(this)):b.then(function(a){this.complete(!1,a)}.bind(this),function(a){this.complete(!0,a)}.bind(this)):this.complete(!1,this.value))},n.prototype.getComments=function(){return this.comments.slice(0)},n.prototype.getCompletedPromise=function(){var a,b;b=[this.getPromise()];for(a in this.sections)b.push(this.sections[a].getCompletedPromise());for(a in this.nexts)b.push(this.nexts[a].getCompletedPromise());return Promise.all(b)},n.prototype.getData=function(a){var b,c,d,e;d=[],a=void 0===a?!1:a;for(c in this.nexts)a&&this.nexts[c].isSuccessful()||d.push(this.nexts[c].getData(a));b={async:this.async,enabled:this.enabled,id:this.id,nexts:d,not:this.notMode,result:this.results.test,sections:[],strict:this.strictMode,testParameters:this.testParametersExport,title:this.title,type:"TestUnit",value:this.value};for(e in this.sections)a&&this.sections[e].isSuccessful()||0==e&&0===this.sections[e].countTotalTests()||b.sections.push(this.sections[e].getData(a));return this.testType&&(b.test=this.testType.code),b},n.prototype.getDescription=function(){return this.description},n.prototype.getDurationResult=function(){return this.durationResult},n.prototype.getDOM=function(){return this.domTest},n.prototype.getEndDate=function(){return this.testFunction?this.testExecution.getEndDate():this.creationDate},n.prototype.getEndTime=function(){this.getProject().getTime(this.getEndDate())},n.prototype.getPromise=function(){return this.promise},n.prototype.getProject=function(){return this.project},n.prototype.getNexts=function(){return this.nexts.slice(0)},n.prototype.getNotes=function(){return this.notes.slice(0)},n.prototype.getResult=function(){return this.results.test===!1?!1:this.results.count.fails>0?!1:this.results.validity===!1?!1:this.results.timeout!==!1},n.prototype.getSections=function(){return this.sections.slice(0)},n.prototype.getStartDate=function(){return this.testFunction?this.testExecution.getStartDate():this.creationDate},n.prototype.getStartTime=function(){return this.getProject().getTime(this.getStartDate())},n.prototype.getTestFunction=function(){return this.testFunction},n.prototype.getTitle=function(){return this.title},n.prototype.getToDoList=function(){return this.toDoList.slice(0)},n.prototype.getValue=function(){return this.value},n.prototype.hasAsyncTests=function(){var a,b;if(void 0!==this.asyncTests)return this.asyncTests;if(this.async)return this.asyncTests=!0,!0;for(a in this.nexts)if(this.nexts[a].hasAsyncTests())return this.asyncTests=!0,!0;for(b in this.sections)if(this.sections[b].hasAsyncTests())return this.asyncTests=!0,!0;return!1},n.prototype.hasFinished=function(){var a,b;if(this._hasFinished===!0)return this._hasFinished;if(this.testFunction&&!this.testExecution.hasFinished())return!1;for(b in this.sections)if(!this.sections[b].hasFinished())return!1;for(a in this.nexts)if(!this.nexts[a].hasFinished())return!1;return this._hasFinished=!0,this._hasFinished},n.prototype.hasFinishedInTime=function(){return this.testFunction?void 0===this.timeout?!0:this.testExecution.hasFinished()?this.testExecution.getDuration()<this.timeout:this.testExecution.getDuration(!0)>=this.timeout?!1:void 0:!0},n.prototype.isClosed=function(){return this._isClosed===!0?!0:this.hasFinished()?(this._isClosed=!0,!0):this.hasFinishedInTime()===!1?(this._isClosed=!0,!0):void 0},n.prototype.isGroup=function(){return this.sections.length>1?!0:this.nexts.length>0?!0:this.sections[0].getTests().length>0;
},n.prototype.isSuccessful=function(){var a,b;if(this.getResult()===!1)return!1;for(a in this.sections)if(!this.sections[a].isSuccessful())return!1;for(b in this.nexts)if(!this.nexts[b].isSuccessful())return!1;return!0},n.prototype.isUnitTest=function(){return void 0===this.testFunction?!0:void 0!==this.testType?!0:void 0!==this.timeout?!0:void 0!==this.value&&!(this.value instanceof Promise||this.value instanceof n)},n.prototype.isValid=function(){return this.isUnitTest()?!0:this.isGroup()},n.prototype.not=function(){return this.notMode=!0,this.getPromise()},n.prototype.note=function q(q){return this.notes.push(q),this.getPromise()},n.prototype.refresh=function(a,b,c,d){var e,f,g,h,i,j,k,l;if(this.completed&&!this.calculated&&(this.results.error&&(this.calculated=!0,this.rejectPromise(this.error)),!this.results.error||this.errorExpected))try{this.calcResult(),this.results.error||this.fullfillPromise(this.value)}catch(e){this.error=e,this.results.error=!0,this.rejectPromise(this.error)}if(void 0!==this.results.count.total){if(void 0!==d&&void 0!==this.results.count.total)this.results.count.deltaErrors+=a,this.results.count.fails+=b,this.results.count.successes+=c,this.results.count.total+=d,this.results.count.isValid=this.isValid();else{this.errors=[],this.results.validity||(this.results.validity=this.isValid()),f=0,this.results.error&&!this.errorExpected?(f+=1,this.errors.push("The test has raised an exception")):!this.results.error&&this.errorExpected&&(f+=1,this.errors.push("The test should have raise an exception")),g=this.isUnitTest()&&!this.results.test?1:0,g+=f,g+=this.results.validity?0:1,this.isUnitTest()&&!this.results.test&&this.errors.push("The test has failed"),this.results.validity||this.errors.push("Not a valid test"),h=this.hasFinishedInTime(),void 0===h||h||(g+=1),j=this.isUnitTest()&&this.results.test?1:0,j+=void 0!==this.timeout&&this.results.timeout?1:0,this.testFunction&&void 0!==this.timeout&&(h=this.hasFinishedInTime(),void 0===h||h||(j+=1)),l=this.isUnitTest()?1:0,l+=void 0!==this.timeout;for(i in this.sections)f+=this.sections[i].countErrors(),g+=this.sections[i].countFailedTests(),j+=this.sections[i].countSuccessfulTests(),l+=this.sections[i].countTotalTests();for(k in this.nexts)f+=this.nexts[i].countErrors(),g+=this.nexts[k].countFailedTests(),j+=this.nexts[k].countSuccessfulTests(),l+=this.nexts[k].countTotalTests();void 0!==this.results.count.total&&(a=f-this.results.count.errors,b=g-this.results.count.fails,c=j-this.results.count.successes,d=l-this.results.count.total),this.results.count={errors:f,fails:g,successes:j,total:l}}void 0!==this.parent&&void 0!==this.parent.results.count.total&&this.parent.refresh(a,b,c,d),this.getDOM()&&this.getDOM().refresh()}},n.prototype.setDOM=function(a){this.domTest=a},n.prototype.then=function(a,b,c){var d,e,f,g,h;return 1===arguments.length?(h=void 0,f=a):2==arguments.length?"string"==typeof a?(h=a,f=b):(h=void 0,f=a,d=b):3===arguments.length&&(h=a,f=b,d=c),void 0!=f&&(g=new n({async:!0,context:this.childContext,enabled:this.enabled,executionDelay:!1,strict:this.strictMode,parent:this,project:this.getProject(),promiseRole:"then",title:h,value:f}),this.nexts.push(g)),void 0!=d&&(e=new n({async:!0,context:this.childContext,enabled:this.enabled,executionDelay:!1,strict:this.strictMode,parent:this,project:this.getProject(),promiseRole:"catch",title:h,value:d}),this.catchTests.push(e)),this.refresh(),void 0!=g?g.getPromise():e.getPromise()},n.prototype.todo=function(a){return this.toDoList.push(a),this.getPromise()},n.prototype.toString=function(){return this.title+" : "+(this.isSuccessful()?"success":"fail")+" ("+this.countSuccessfulTests()+"/"+this.countTotalTests()+")"},n.get=function(a){return n.ALL[a]},n.lastId=0,n.ALL=[],n.TYPES={test:"test",unit:"unit"},n.TEST_TYPES={},c["default"]=n},{"./Context":2,"./Section":7,"./TestExecution":8,"./TestType":9,"./functions":12}],11:[function(a,b,c){"use strict";function d(a){return JSON.parse(JSON.stringify(a))}function e(a,b,c){for(;a.length<b;)a=c+a;return a}function f(a,b){var c,d;return d=h.render(a,b),c=document.createElement("div"),c.innerHTML=d,c.firstChild}function g(a){var b,c,d,f,g;return void 0===a?"":(c=Math.floor(a/36e5),a-=60*c*60*1e3,d=Math.floor(a/6e4),a-=60*d*1e3,f=Math.floor(a/1e3),a-=1e3*f,g=a,b=c+"h"+e(d,2,"0")+"m"+e(g,4,"0"))}Object.defineProperty(c,"__esModule",{value:!0});var h=a("mustache");c.copy=d,c.lpad=e,c.render2dom=f,c.time2string=g},{mustache:1}],12:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}Object.defineProperty(c,"__esModule",{value:!0}),c.buildTest_execute=c.buildTest=void 0;var e=a("./common"),f=d(e),g=function(a){var b,c;c=a.getPromise();for(b in TestType.all)c[b]=h.bind({test:a,type:TestType.all[b],promise:c});return c.todo=a.todo.bind(a),c.comment=a.comment.bind(a),c.describe=a.describe.bind(a),c.note=a.note.bind(a),c.getResult=a.getResult.bind(a),c.then=a.then.bind(a),c["catch"]=a["catch"].bind(a),Object.defineProperty(c,"not",{get:function(){return a.not,c}}),c.$=a,c},h=function(){return this.test.testType=this.type,this.test.testParameters=Array.prototype.slice.call(arguments,0),this.test.testParametersExport=f.copy(this.test.testParameters),this.test.calculated=!1,this.test.errorExpected=this.type.onerror,this.test.refresh(),this.promise};c.buildTest=g,c.buildTest_execute=h},{"./common":11}],13:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={section:{startDate:"Start date",endDate:"End date",duration:"Duration",second:"second",countTotal:"total",countSuccess:"success",countFail:"fails",yes:"yes",no:"no"},test:{startTime:"Start time",endTime:"End time",duration:"Duration",second:"second",countTotal:"Tests",countSuccess:"Successes",fail_plural:"fails",fail:"fail",yes:"yes",no:"no"}};c["default"]=d},{}],14:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./Context"),f=d(e),g=a("./Project"),h=d(g),i=function(a,b){var c;b.groupCollapsed=function(){b.Console_groupCollapsed.apply(console,arguments)},b.groupEnd=function(){b.Console_groupEnd.apply(console,arguments)},b.warn=function(){b.Console_warn.apply(console,arguments)},b.log=function(){b.Console_warn.apply(console,arguments)},c=function(){},c.amd=void 0;var d=new h["default"];return(0,f["default"])(d)}(void 0,{Console_groupCollapsed:console.groupCollapsed,Console_groupEnd:console.groupEnd,Console_warn:console.warn,Console_log:console.log});c["default"]=i,b.exports=i,window&&(window.test=i)},{"./Context":2,"./Project":6}],15:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={};c.token=d},{}]},{},[14]);
//# sourceMappingURL=test-js.js.map